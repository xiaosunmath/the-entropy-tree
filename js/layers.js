addLayer("a", {
    infoboxes:{
        introBox:{
            title:"ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©",
            body(){
                return "ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©<br>ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©<br>ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©<br>ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©<br>ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©<br>ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©<br>ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©<br>ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©<br>ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©<br>ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©ğŸ’©<br>ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­"
            }
        },
        fuckBox:{
            title:"ä½ è·Œæ¥äº†",
            body(){
                return "çœ‹åˆ°è¿™é‡Œæ²¡ç¬‘çš„å°±æ˜¯ç¥äººï¼Œæˆ‘è¦å‚»æ‰ä½ ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>ğŸ˜¡<br>"
            }
        },
    },
    name: "æˆå°±",
    symbol: "æˆ<br>å°±<br>ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£",
    position: 0,
    startData() { return {
        unlocked: true,
		points: new Decimal(0),
    }},
    color: "#FFFF00",
    resource: "æˆå°±",
    tabFormat: {
        "æˆå°±ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£": {
            content: [ ["infobox","introBox"],"main-display","prestige-button","achievements"],},
        "æŠ½è±¡å¤§å¸å‘åŠ›äº†": {
            content: [ ["infobox","fuckBox"]],
        },
    },
    achievements: {
        11:{
            name: "å‚»é€¼ä¹‹ğŸ’©",
            done() {return player.p.points.gte(1)}, 
            onComplete(){player.a.points=player.a.points.add(1)},
            tooltip: "è·å¾—ä½ ç¬¬ä¸€ä¸ªç²’å­", 
            textStyle: {'color': '#00FFFF'},
        },
        12:{
            name: "2é€¼ä¹‹ğŸ’©",
            done() {return player.p.points.gte(1000)}, 
            onComplete(){player.a.points=player.a.points.add(1)},
            tooltip: "è·å¾—ä½ ç¬¬ä¸€åƒä¸ªç²’å­", 
            textStyle: {'color': '#88DD44'},
        },
        13:{
            name: "ğŸ’©ä¹‹æ’æ˜Ÿ",
            done() {return player.c.points.gte(1)}, 
            onComplete(){player.a.points=player.a.points.add(1)},
            tooltip: "è·å¾—ä½ ç¬¬ä¸€ä¸ªå¤©ä½“", 
            textStyle: {'color': '#FFFF00'},
        },
        14:{
            name: "ğŸ’©ä¸­çš„ç”Ÿå‘½",
            done() {return getBuyableAmount("c",12).gte(1)}, 
            onComplete(){player.a.points=player.a.points.add(1)},
            tooltip: "è·å¾—ä½ ç¬¬ä¸€ä¸ªç”Ÿå‘½", 
            textStyle: {'color': '#FFFF00'},
        },
        15:{
            name: "ğŸ’©è†¨èƒ€äº†",
            done() {return hasUpgrade("c",14)}, 
            onComplete(){player.a.points=player.a.points.add(1)},
            tooltip: "è·å¾—ç¬¬4ä¸ªå¤©ä½“å‡çº§", 
            textStyle: {'color': '#FFFF00'},
        },
        21:{
            name: "ğŸ’©ä¹‹æè‡´",
            done() {return player.u.points.gte(1)}, 
            onComplete(){player.a.points=player.a.points.add(1)},
            tooltip: "è·å¾—ä¸€ä¸ªè¢«æ ¸å¼¹ç‚¸æ­»çš„å®‡å®™(ç¬¬2è¡Œ)", 
            textStyle: {'color': '#999999'},
        },
        22:{
            name: "è¶Šæ¥è¶ŠğŸ’©",
            done() {return hasUpgrade("u",22)}, 
            onComplete(){player.a.points=player.a.points.add(1)},
            tooltip: "è§£é”å‚»é€¼å®‡å®™åŠ›é‡", 
            textStyle: {'color': '#999999'},
        },
        23:{
            name: "ğŸ’©ä¹‹åˆæˆ",
            done() {return player.e.points.gte(1)}, 
            onComplete(){player.a.points=player.a.points.add(1)},
            tooltip: "è§£é”å…ƒç´ åˆæˆå™¨", 
            textStyle: {'color': '#DD55DD'},
        },
        24:{
            name: "ğŸ’©ä¹‹å¢é‡",
            done() {return player.c.mass.gte(1)}, 
            onComplete(){player.a.points=player.a.points.add(1)},
            tooltip: "è§£é”æ’æ˜Ÿè´¨é‡", 
            textStyle: {'color': '#DD55DD'},
        },
        25:{
            name: "ğŸ’©çˆ†ç‚¸äº†",
            done() {return hasUpgrade("e",24)}, 
            onComplete(){player.a.points=player.a.points.add(1)},
            tooltip: "è§£é”å…ƒç´ è£‚å˜", 
            textStyle: {'color': '#DD55DD'},
        },
        31:{
            name: "åŠ çƒ­ä½ çš„ğŸ’©",
            done() {return hasUpgrade("e",33)}, 
            onComplete(){player.a.points=player.a.points.add(1)},
            tooltip: "è§£é”å®‡å®™å¾®æ³¢è¾å°„æ¸©åº¦", 
            textStyle: {'color': '#999999'},
        },
        32:{
            name: "ğŸ’©çš„è£‚å˜",
            done() {return hasUpgrade("u",42)}, 
            onComplete(){player.a.points=player.a.points.add(1)},
            tooltip: "è§£é”æŒ‘æˆ˜â€œå¼ºåˆ¶è£‚å˜â€", 
            textStyle: {'color': '#999999'},
        },
        33:{
            name: "ğŸ’©çš„å¾®è§‚",
            done() {return player.q.points.gte(1)}, 
            onComplete(){player.a.points=player.a.points.add(1)},
            tooltip: "è·å¾—ç¬¬ä¸€ä¸ªå¤¸å…‹", 
            textStyle: {'color': '#CC00CC'},
        },
        34:{
            name: "ä»€ä¹ˆï¼ŸğŸ’©çš„è£‚å˜å¢å¼ºå‡çº§",
            done() {return hasUpgrade("uc",11)}, 
            onComplete(){player.a.points=player.a.points.add(1)},
            tooltip: "è·å¾—ucå±‚çš„å‡çº§", 
            textStyle: {'color': '#FFFFFF'},
        },
        35:{
            name: "ğŸ’©çš„å¤šæ ·åŒ–",
            done() {return hasUpgrade("q",31)}, 
            onComplete(){player.a.points=player.a.points.add(1)},
            tooltip: "è·å¾—èƒ½è·å–å¥‡å¤¸å…‹å’Œç²²å¤¸å…‹çš„èƒ½åŠ›", 
            textStyle: {'color': '#CC00CC'},
        },
        41:{
            name: "ğŸ’©ä¹‹ç­–ç•¥",
            done() {return hasUpgrade("q",33)}, 
            onComplete(){player.a.points=player.a.points.add(1)},
            tooltip: "è§£é”å¤¸å…‹ç ”ç©¶æ ‘", 
            textStyle: {'color': '#CC00CC'},
        },
        42:{
            name: "å®Œæ•´çš„ğŸ’©ç­–ç•¥",
            done() {return getClickableState("q",111)}, 
            onComplete(){player.a.points=player.a.points.add(1)},
            tooltip: "å¯ä»¥è´­ä¹°å®Œæ•´çš„å¤¸å…‹ç ”ç©¶æ ‘", 
            textStyle: {'color': '#CC00CC'},
        },
        43:{
            name: "6å€ğŸ’©",
            done() {return hasUpgrade("q",35)}, 
            onComplete(){player.a.points=player.a.points.add(1)},
            tooltip: "å¯ä»¥è·å¾—é¡¶å¤¸å…‹å’Œåº•å¤¸å…‹", 
            textStyle: {'color': '#CC00CC'},
        },
    },
    row: "side",
    
    layerShown(){return true}
})
addLayer("sb", {
    infoboxes:{
        startBox:{
            title:"å¼€å§‹âŒâŒâŒâŒâŒâŒâŒ",
            body(){
                return "ä½ è¿™ä¸ªå‚»é€¼ï¼Œæ¥åˆ°å®‡å®™åè®©å®‡å®™å¼€å§‹å˜çš„æ··ä¹±"
            }
        },
        parBox:{
            title:"ç²’å­",
            body(){
                return "ä½ è®©ä¸€ä¸ªç²’å­è„±ç¦»äº†ç§©åºï¼Œç½ªå¤§æ¶æ"
            }
        },
        celBox:{
            title:"å¤©ä½“",
            body(){
                return "ä½ æ’¼åŠ¨äº†ä¸€ä¸ªå¤©ä½“ï¼Œè¿™å¼•èµ·äº†æ³¨è§†"
            }
        },
        uniBox:{
            title:"å®‡å®™",
            body(){
                return "ä½ å‡»ç ´äº†ä¸€ä¸ªå®‡å®™ï¼Œå¤šå…ƒå®‡å®™ä¹‹ç¥éå¸¸å¥½å¥‡"
            }
        },
        eleBox:{
            title:"å…ƒç´ ",
            body(){
                return "ä½ è·å¾—äº†æ“æ§å…ƒç´ çš„åŠ›é‡"
            }
        },
        chalBox:{
            title:"æŒ‘æˆ˜",
            body(){
                return "ä½ è¢«å¤šå…ƒå®‡å®™ä¹‹ç¥å‹åˆ¶äº†ï¼Œä½†æ˜¯ä½ èƒ½æ‰¾åˆ°å‡ºè·¯"
            }
        },
        quarkBox:{
            title:"å¤¸å…‹",
            body(){
                return "ä½ è½¬èº«å‘å¾®è§‚è¿›å†›ï¼Œæ•ˆæœç”šä½³"
            }
        },
    },
    name: "å‰§æƒ…",
    symbol: "å‰§æƒ…ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡",
    position: 1,
    startData() { return {
        unlocked: true,
		points: new Decimal(0),
    }},
    color: "#FFFF00",
    resource: "å‰§æƒ…",
    tabFormat: {
        "å‰§æƒ…ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡": {
            content: [ ["infobox","startBox"],
            ["infobox","parBox"],
            ["infobox","celBox"],
            ["infobox","uniBox"],
            ["infobox","eleBox"],
            ["infobox","chalBox"],
            ["infobox","quarkBox"],],},
    },
    row: "side",
    
    layerShown(){return true}
})
addLayer("p", {
    infoboxes:{
        introBox:{
            title:"ä¸€ä¸ªä»‹ç»",
            body(){
                return "å“¦ï¼Œæˆ‘çš„ä¸Šå¸å•Š<br>è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªä½œå“ï¼ŒåŒæ—¶ä¹Ÿä¼šæˆä¸ºæˆ‘çš„ä¸»çº¿<br>å¦‚æœåœ¨æŸäº›åœ°æ–¹å¹³è¡¡å’Œå±ä¸€æ ·ï¼Œè¯·è”ç³»ä½œè€…QQ3988009796<br>å¦‚æœåšçš„å¤§ç²ªï¼Œä¸è¦éª‚è¡Œå—qwq"
            }
        },
    },
    name: "ç²’å­",
    symbol: "p",
    position: 0,
    startData() { return {
        unlocked: true,
		points: new Decimal(0),
        pts: new Decimal(0),
    }},
    color: "#00FFFF",
    requires: new Decimal(10),
    resource: "ç²’å­",
    baseResource: "ç†µ",
    baseAmount() {return player.points},
    type: "normal",
    exponent: 0.5,
    gainMult() {
        mult = new Decimal(1)
        if(hasUpgrade("p",12)) mult = mult.mul(upgradeEffect("p",12))
        if(hasUpgrade("u",11)) mult = mult.mul(10)
        if(inChallenge("u",22)) mult = mult.div("1e500")
        if(hasUpgrade("p",33)) mult = mult.mul("1e485")
        if(getClickableState("q",61) == 1) mult = mult.mul(1e5)
        return mult
    },
    gainExp() {
        exp = new Decimal(1)
        if(hasUpgrade("p",23)) exp = exp.add(0.2)
        if(hasUpgrade("u",13)) exp = exp.add(0.1)
        if(hasUpgrade("u",15)) exp = exp.add(0.2)
        if(inChallenge("u",21)) exp = exp.div(10)
        return exp
    },
    update(diff){
        if(inChallenge("u",22)) player.p.pts = player.points
        else player.p.pts = player.p.pts.sub(player.p.pts)
    },
    upgrades: {
        11: {
            title:"æè¿°æè¿°æè¿°",
            description(){
                let disp = "åŸºäºç²’å­å¢åŠ ç†µè·å¾—<br>å½“å‰ï¼šx" + format(upgradeEffect("p",11))
                if(upgradeEffect("p",11) > 1e8) disp += "<br>(è½¯ä¸Šé™)"
                if(upgradeEffect("p",11) > 1e35) disp += "<br>(è½¯ä¸Šé™)"
                return disp
            },
            cost: new Decimal(1),
            effect(){
                let effe = player.p.points.add(1).root(2)
                if(effe > 1e8) effe = effe.div(1e8).root(5).mul(1e8)
                if(effe > 1e35) effe = effe.div(1e35).log(2).mul(1e35)
                return effe
            },
        },
        12: {
            title:"ç‚¸å¼¹ç‚¸å¼¹ç‚¸å¼¹",
            description(){return "ä½ çš„å®‡å®™è¢«æ ¸å¼¹å…¥ä¾µäº†ï¼ŒåŸºäºç†µå¢åŠ ç²’å­è·å¾—<br>å½“å‰ï¼šx" + format(upgradeEffect("p",12))},
            cost: new Decimal(5),
            effect(){return player.points.add(5).log(5)},
        },
        13: {
            title:"æ ¸å¼¹ä½ çš„å®‡å®™",
            description(){return "æ ¸å¼¹æ­£åœ¨æš´èµ°ï¼ŒæŠŠå®‡å®™æ‰“æˆäº†å¤§ä¾¿ï¼ŒåŸºäºç†µå¢åŠ ç†µè·å¾—<br>å½“å‰ï¼šx" + format(upgradeEffect("p",13))},
            cost: new Decimal(10),
            effect(){return player.points.add(2).log(2)},
        },
        14: {
            title:"ç¦è¨€å¤©ç¥-666å¤§é»‘",
            description(){return "åŸºäº666å¤§é»‘å¥´ å½¹çš„ç¾¤é‡Œä¸€æ¬¡ç¦è¨€çš„æ—¶é—´ç»™å¤¸å…‹ä¸€ä¸ªåŠ æˆ(æœ€å¤š29å¤©23å°æ—¶59åˆ†)<br>å½“å‰ï¼šx" + format(upgradeEffect("p",14))},
            cost: new Decimal(1e27),
            effect(){
                let effe = new Decimal(600)
                if(hasUpgrade("p",24)) effe = effe.pow(upgradeEffect("p",24))
                return effe.min(2591940)
            },
            unlocked(){
                return hasUpgrade("uc",12)
            }
        },
        21: {
            title:"åç‰©è´¨åç‰©è´¨åç‰©è´¨åç‰©è´¨åç‰©è´¨",
            description(){return "åç‰©è´¨å¼€å§‹çˆ†ç‚¸ï¼ŒåŸºäºç²’å­å¢åŠ ç²’å­ä¹˜æ•°<br>å½“å‰ï¼šx" + format(upgradeEffect("p",21))},
            cost: new Decimal(50),
            effect(){return player.p.points.add(10).log(10)},
        },
        22: {
            title:"æ ¸å¼¹ä½¿ç”¨äº†è¿›åŒ–ï¼Œå˜æˆäº†æ°¢å¼¹",
            description(){return "ç†µè·å–Ã—3<br>"},
            cost: new Decimal(100),
        },
        23: {
            title:"åç‰©è´¨æ‰“ç ´äº†æ— é™ï¼Œè¶…è¶Šäº†e1000",
            description(){return "ç²’å­è·å–æŒ‡æ•°+0.2<br>"},
            cost: new Decimal(200),
        },
        24: {
            title:"å†åº¦åˆ·å±",
            description(){return "è·å¾—ç‚¹å‡»Qç¾¤ç®¡å®¶åˆ·å±çš„åŠ›é‡ï¼ŒæŒ‡æ•°å€å¢ç¦è¨€æ—¶é•¿<br>å½“å‰ï¼š^" + format(upgradeEffect("p",24))},
            cost: new Decimal(1e33),
            effect(){return player.points.add(1).log(10).add(1).root(10)},
            unlocked(){
                return hasUpgrade("p",14)
            }
        },
        31: {
            title:"é‡æ–°å¼€å§‹ï¼Ÿ",
            description(){return "ç»™è´¨å­ä¸€ä¸ªæ•ˆæœâ€¦â€¦<br>"},
            cost: new Decimal(1e7),currencyDisplayName:"ç†µ",currencyInternalName:"pts",currencyLayer:"p",
            unlocked(){
                return inChallenge("u",22) || hasUpgrade("p",31)
            }
        },
        32: {
            title:"å±‚çº§",
            description(){return "è§£é”ä¸€ä¸ªæ–°å±‚çº§<br>"},
            cost: new Decimal(1e20),currencyDisplayName:"ç†µ",currencyInternalName:"pts",currencyLayer:"p",
            unlocked(){
                return inChallenge("u",22) || hasUpgrade("p",31)
            }
        },
        33: {
            title:"å¦‚ä½•è·å¾—ç²’å­ï¼Œé¦–å…ˆè¦è·å¾—ç²’å­",
            description(){return "ç²’å­è·å¾—ä¹˜ä»¥1e485(æŒ‡æ•°å‰)ï¼Œå¹¶ä¸”è§£é”ä¸€äº›å¤¸å…‹å‡çº§<br>"},
            cost: new Decimal(20000),currencyDisplayName:"å¤¸å…‹",currencyInternalName:"points",currencyLayer:"q",
            unlocked(){
                return (inChallenge("u",22) || hasUpgrade("p",31)) && hasUpgrade("uc",11)
            }
        },
    },
    doReset(resettingLayer){
        if(layers[resettingLayer].row > layers[this.layer].row){
            let kept = ["unlocked","auto"]
            if(resettingLayer == "e" && hasMilestone("e",0)){
                kept.push("upgrades")
            }
            if(resettingLayer == "u" && hasMilestone("e",0)){
                kept.push("upgrades")
            }
            layerDataReset(this.layer,kept)
        }
    },
    passiveGeneration(){
        if(hasMilestone("c",0)) return 1
        else return 0
    },
    row: 0,
    
    hotkeys: [
        {key: "p", description: "P: è¿›è¡Œç²’å­é‡ç½®", onPress(){if (canReset(this.layer)) doReset(this.layer)}},
    ],
    layerShown(){return true}
})
addLayer("c", {
    infoboxes:{
        introBox:{
            title:"è¯·è¾“å…¥æ–‡æœ¬",
            body(){
                return "è¯·è¾“å…¥æ–‡æœ¬è¯·è¾“å…¥æ–‡æœ¬è¯·è¾“å…¥æ–‡æœ¬è¯·è¾“å…¥æ–‡æœ¬è¯·è¾“å…¥æ–‡æœ¬è¯·è¾“å…¥æ–‡æœ¬<br>"
            },
        },
    },
    name: "å¤©ä½“",
    symbol: "c",
    position: 1,
    startData() { return {
        unlocked: false,
		points: new Decimal(0),
        mass: new Decimal(0),
        masseff: new Decimal(0),
    }},
    color: "#FFFF00",
    requires: new Decimal(1000),
    resource: "å¤©ä½“",
    baseResource: "ç²’å­",
    baseAmount() {return player.p.points}, 
    type: "normal",
    exponent: 0.5,
    branches(){return ["p"]},
    gainMult() {
        mult = new Decimal(1)
        mult = mult.mul(buyableEffect("c",11))
        if(hasUpgrade("u",11)) mult = mult.mul(10)
        if(inChallenge("u",22)) mult = mult.div("1e500")
        return mult
    },
    gainExp() {
        exp = new Decimal(1)
        if(hasUpgrade("u",13)) exp = exp.add(0.1)
        if(hasUpgrade("u",15)) exp = exp.add(0.2)
        if(inChallenge("u",12)) exp = exp.div(5)
        return exp
    },
    massgain(){
        let gain = new Decimal(0)
        if(hasUpgrade("e",14)) gain = gain.add(1)
        if(hasUpgrade("u",21) && hasUpgrade("e",22)) gain = gain.mul(upgradeEffect("u",21))
        if(hasUpgrade("e",23)) gain = gain.mul(upgradeEffect("e",23))
        if(hasUpgrade("e",31)) gain = gain.mul(upgradeEffect("e",31))
        return gain
    },
    update(diff){
        if(hasMilestone("c",1)) layers.c.buyables[11].buyMax()
        if(hasMilestone("c",2)) layers.c.buyables[12].buyMax()
        player.c.mass=player.c.mass.add(tmp.c.massgain.mul(diff))
        player.c.masseff = player.c.mass.root(2).div(10).add(1)
        if(player.c.masseff.sub(2.5) > 0) player.c.masseff = player.c.masseff.sub(1.5).log(10).add(2.5)
    },
    tabFormat: {
        "ä¸»ç•Œé¢": {
            content: [ ["infobox","introBox"],"main-display","prestige-button","milestones","buyables","upgrades"],},
        "æ’æ˜Ÿè´¨é‡": {
            content: [ ["infobox","introBox"],
               "main-display","prestige-button",["display-text",
                function() {return 'ä½ æœ‰' + format(player.c.mass) + 'æ’æ˜Ÿè´¨é‡,å°†å¤©ä½“å±‚çº§çš„ä¸¤ä¸ªè´­ä¹°é¡¹æ•ˆæœåœ¨è½¯ä¸Šé™åå˜ä¸ºåŸæ¥çš„' + format(player.c.masseff) + 'æ¬¡æ–¹'},
               {"color": "#FFFFFF", "font-size": "20px" }]],
            unlocked(){return hasUpgrade('e',14)}
        },
    },
    upgrades: {
        11: {
            title:"å®‡å®™å®‡å®™å®‡å®™",
            description(){
                let disp = "åç‰©è´¨å¼€å§‹å¤åˆ¶å™¨ï¼Œå¼•åŠ›å¼€å¯äº†æŒ‚å£æ¨¡å¼ï¼Œæ‰€ä»¥æœ‰å¤©ä½“ã€‚åŸºäºå¤©ä½“å¢åŠ ç†µä¹˜æ•°<br>å½“å‰ï¼šx" + format(upgradeEffect("c",11))
                if(upgradeEffect("c",11) > 1e15) disp += "<br>(è½¯ä¸Šé™)"
                if(upgradeEffect("c",11) > 1e130) disp += "<br>(è½¯ä¸Šé™)"
                return disp
            },
            cost: new Decimal(0),
            effect(){
                let effe = player.c.points.add(1).pow(1.2)
                if(hasUpgrade("c",13)) effe = effe.pow(2)
                if(effe > 1e15) effe = effe.div(1e15).root(5).mul(1e15)
                if(effe > 1e130) effe = effe.div(1e130).log(2).mul(1e130)
                return effe
            },
        },
        12: {
            title:"åç‰©è´¨å¼€å§‹æ°¸æ’ï¼Œè¶…è¿‡äº†e100000",
            description(){return "å¢åŠ ç¬¬ä¸€ä¸ªå¯è´­ä¹°æ•ˆæœ/éª·é«…<br>"},
            cost: new Decimal(10000),
        },
        13: {
            title:"æ°¢å¼¹è¿›è¡Œäº†è¿›åŒ–ï¼Œå˜æˆäº†5é˜¶æ ¸å¼¹",
            description(){return "å¢åŠ æˆ‘ä¸ä¼šèµ·åå­—äº†æ•ˆæœ/éª·é«…<br>"},
            cost: new Decimal(1e17),
        },
        14: {
            title:"è¿™æ˜¯ä¸€ä¸ªè†¨èƒ€ï¼Œå› ä¸ºåç‰©è´¨åœ¨å…‰æš—æ ‘è†¨èƒ€æœŸ",
            description(){return "ç¬¬ä¸€ä¸ªå¯è´­ä¹°çš„æ•°é‡è¢«ç¬¬äºŒä¸ªå¯è´­ä¹°ä¹˜äº¿ä¸‹<br>"},
            cost: new Decimal(1e27),
        },
    },
    milestones: {
        0: {
            requirementDescription: "100000å¤©ä½“",
            effectDescription: "æ¯ç§’è·å¾—100%çš„ç²’å­å’Œå¤©ä½“",
            done() { return player.c.points.gte(100000) }
        },
        1: {
            requirementDescription: "1e12å¤©ä½“",
            effectDescription: "è‡ªåŠ¨è´­ä¹°æœ€å¤§æ˜Ÿç³»å¹¶ä¸”è´­ä¹°æ˜Ÿç³»ä¸æ¶ˆè€—å¤©ä½“",
            done() { return player.c.points.gte(1e12) }
        },
        2: {
            requirementDescription: "1e36å¤©ä½“",
            effectDescription: "è‡ªåŠ¨è´­ä¹°æœ€å¤§ç”Ÿå‘½å¹¶ä¸”è´­ä¹°ç”Ÿå‘½ä¸æ¶ˆè€—å¤©ä½“<br>å“¦ä¸ï¼Œæ ¸å¼¹å·²ç»è¿›åŒ–åˆ°114514é˜¶äº†ï¼Œå¹¶ä¸”åç‰©è´¨ä¹Ÿè¿›å…¥äº†æ¯ç­ç°å®",
            done() { return player.c.points.gte(1e36) }
        },
    },
    buyables: {
        11: {
            title: "æ˜Ÿç³»",
            cost(x) { return new Decimal(10).mul(x.add(1).pow(3)) },
            display() { 
                let disp = "å¢åŠ å¤©ä½“è·å¾—<br>å½“å‰ï¼šx" + format(buyableEffect("c",11))
                if(buyableEffect("c",11) > 1e30) disp = disp + "ï¼ˆå—nbçš„è½¯ä¸Šé™é™åˆ¶ï¼‰"
                disp = disp + "<br>ä»·æ ¼ï¼š" + format(this.cost()) + "<br>æ•°é‡ï¼š" + format(getBuyableAmount("c",11))
                if(hasUpgrade("c",14)) disp = disp + "x" + format(getBuyableAmount("c",12))
                return disp
            },
            canAfford() { return player[this.layer].points.gte(this.cost()) },
            buy() {
                player[this.layer].points = player[this.layer].points.sub(this.cost())
                setBuyableAmount(this.layer, this.id, getBuyableAmount(this.layer, this.id).add(1))
            },
            buyMax() {
                if (!this.canAfford()) return;
                let tempBuy = player.c.points.max(1).div(10).root(3)
                let target = tempBuy.plus(1).floor();
                player[this.layer].buyables[this.id] = player[this.layer].buyables[this.id].max(target);
            },
            effect(){
                let effe = getBuyableAmount("c",11)
                if(hasUpgrade("c",14)) effe = effe.mul(getBuyableAmount("c",12))
                effe = effe.add(1)
                if(hasUpgrade("c",12)) effe = effe.pow(1.2)
                if(effe > 1e30) effe = effe.div(1e30).log(2).pow(5).mul(1e30)
                effe = effe.pow(player.c.masseff)
                return effe
            },
        },
        12: {
            title: "ç”Ÿå‘½",
            cost(x) { return new Decimal(1e15).mul(x.add(1).pow(4)) },
            display() { 
                let disp = "å¢åŠ ç†µè·å¾—<br>å½“å‰ï¼šx" + format(buyableEffect("c",12))
                if(buyableEffect("c",12) > 1e50) disp = disp + "ï¼ˆå—nbçš„è½¯ä¸Šé™é™åˆ¶ï¼‰"
                disp = disp + "<br>ä»·æ ¼ï¼š" + format(this.cost()) + "<br>æ•°é‡ï¼š" + format(getBuyableAmount("c",12))
                return disp
            },
            canAfford() { return player[this.layer].points.gte(this.cost()) },
            buy() {
                player[this.layer].points = player[this.layer].points.sub(this.cost())
                setBuyableAmount(this.layer, this.id, getBuyableAmount(this.layer, this.id).add(1))
            },
            buyMax() {
                if (!this.canAfford()) return;
                let tempBuy = player.c.points.max(1).div(1e15).root(4)
                let target = tempBuy.plus(1).floor();
                player[this.layer].buyables[this.id] = player[this.layer].buyables[this.id].max(target);
            },
            effect(){
                effe = getBuyableAmount("c",12).add(1).pow(5)
                if(effe > 1e50) effe = effe.div(1e50).log(2).pow(5).mul(1e50)
                effe = effe.pow(player.c.masseff)
                return effe
            },
        },
    },
    doReset(resettingLayer){
        if(layers[resettingLayer].row > layers[this.layer].row){
            let kept = ["unlocked","auto"]
            if(resettingLayer == "e" && hasMilestone("e",0)){
                kept.push("upgrades")
                kept.push("milestones")
            }
            if(resettingLayer == "u" && hasMilestone("e",0)){
                kept.push("upgrades")
                kept.push("milestones")
            }
            if(resettingLayer == "e" && hasUpgrade("e",21)){
                kept.push("mass")
            }
            if(resettingLayer == "u" && hasUpgrade("e",21)){
                kept.push("mass")
            }
            layerDataReset(this.layer,kept)
        }
    },
    row: 0, 
    passiveGeneration(){
        if(hasMilestone("c",0)) return 1
        else return 0
    },
    hotkeys: [
        {key: "c", description: "C: è¿›è¡Œå¤©ä½“é‡ç½®", onPress(){if (canReset(this.layer)) doReset(this.layer)}},
    ],
    layerShown(){
        if(hasUpgrade("p",23)) return true
        if(player.u.points > 0) return true
        else return false
    }
})
addLayer("q", {
    infoboxes:{
        introBox:{
            title:"å¤¸å…‹",
            body(){
                return "è¿™ä¸ªå±‚çº§çš„é¢œè‰²â€¦â€¦ä¸ä¼š"
            }
        },
    },
    name: "å¤¸å…‹",
    symbol: "q",
    position: 2,
    startData() { return {
        unlocked: false,
        points: new Decimal(0),
		upquark: new Decimal(0),
        downquark: new Decimal(0),
        up_quark_energy: new Decimal(0),
        down_quark_energy: new Decimal(0),
        squark: new Decimal(0), //æ‡’çš„æ‰“å…¨åäº†,å¥‡å¤¸å…‹
        cquark: new Decimal(0), //æ‡’çš„æ‰“å…¨åäº†,ç²²å¤¸å…‹
        bquark: n(0), //åº•å¤¸å…‹
        tquark: n(0), //é¡¶å¤¸å…‹
        quarkpts: new Decimal(0), //å¤¸å…‹ç ”ç©¶ç‚¹æ•°
        totalquarkpts: new Decimal(0), //æ€»å¤¸å…‹ç ”ç©¶ç‚¹æ•°
    }},
    color: "#CC00CC",
    requires: new Decimal(1e20),
    resource: "å¤¸å…‹",
    baseResource: "ç†µ",
    baseAmount() {return player.points},
    type: "normal",
    exponent: 0.1,
    softcap: new Decimal("1e100"),
    softcapPower: new Decimal(0.1),
    branches(){return ["c","e"]},
    gainMult() {
        mult = new Decimal(1)
        if(hasUpgrade("q",15)) mult = mult.mul(100)
        if(hasUpgrade("p",14)) mult = mult.mul(upgradeEffect("p",14))
        if(getClickableState("q",62) == 1) mult = mult.mul(100)
        if(getClickableState("q",72) == 1) mult = mult.mul(clickableEffect("q",72))
        if(getClickableState("q",82) == 1) mult = mult.mul(clickableEffect("q",82))
        return mult
    },
    gainExp() {
        exp = new Decimal(1)
        if(getClickableState("q",103) == 1) exp = exp.add(0.2)
        return exp
    },
    up_quark_energy_gain(){
        let gain = player.q.upquark.pow(2)
        if(getClickableState("q",91) == 1) gain = gain.pow(2)
        return gain
    },
    down_quark_energy_gain(){
        let gain = player.q.downquark.pow(2)
        if(getClickableState("q",91) == 1) gain = gain.pow(2)
        return gain
    },
    update(diff){
        player.q.up_quark_energy = player.q.up_quark_energy.add(tmp.q.up_quark_energy_gain.mul(diff))
        player.q.down_quark_energy = player.q.down_quark_energy.add(tmp.q.down_quark_energy_gain.mul(diff))
        if(hasUpgrade("q",22)){
            player.q.upquark = player.q.points.mul(2).max(player.q.upquark)
            player.q.downquark = player.q.points.mul(2).max(player.q.downquark)
        }
        if(hasUpgrade("q",34)){
            player.q.squark = player.q.squark.add(player.q.points.div(10000))
            player.q.cquark = player.q.cquark.add(player.q.points.div(1e8))
        }
        
    },
    tabFormat: {
        "ä¸»ç•Œé¢": {
            content: [ ["infobox","introBox"],"main-display","prestige-button",
            ["display-text",
                function() {
                    if(player.q.points.max("1e100") == player.q.points)return 'å¤¸å…‹è·å¾—è¶…è¿‡1e100çš„éƒ¨åˆ†è¢«10æ¬¡æ–¹æ ¹ï¼ï¼ï¼'
                },
               {"color": "#FFFFFF", "font-size": "40px"}],
            ["display-text",
                function() {return 'ä½ æœ‰' + format(player.q.upquark) + 'ä¸Šå¤¸å…‹'},
               {"color": "#FFFFFF", "font-size": "20px" }],
            ["display-text",
                function() {return 'ä½ æœ‰' + format(player.q.up_quark_energy) + 'ä¸Šå¤¸å…‹èƒ½é‡'},
               {"color": "#FFFFFF", "font-size": "20px" }],
            ["display-text",
                function() {return 'ä½ æœ‰' + format(player.q.downquark) + 'ä¸‹å¤¸å…‹'},
               {"color": "#FFFFFF", "font-size": "20px" }],
            ["display-text",
                function() {return 'ä½ æœ‰' + format(player.q.down_quark_energy) + 'ä¸‹å¤¸å…‹èƒ½é‡'},
               {"color": "#FFFFFF", "font-size": "20px" }],
            ["row",[["clickable",11],["clickable",12]]],
            ["row",[["clickable",21],["clickable",22]]],
            ["row",[["clickable",31],["clickable",32]]],]
        },
        "å‡çº§":{
            content:[ ["infobox","introBox"],"main-display","prestige-button",
            ["row",[["upgrade",11],["upgrade",12],["upgrade",13],["upgrade",14],["upgrade",15]]],
            ["row",[["upgrade",21],["upgrade",22],["upgrade",23],["upgrade",24],["upgrade",25]]],
            ["row",[["upgrade",31],["upgrade",32],["upgrade",33],["upgrade",34],["upgrade",35]]],]
        },
        "å¤¸å…‹ç»Ÿè®¡": {
            content: [
            ["display-text",
                function() {return 'ä½ æœ‰' + format(player.q.upquark) + 'ä¸Šå¤¸å…‹'},
               {"color": "#FFFFFF", "font-size": "20px"}],
            ["display-text",
                function() {return 'ä½ æœ‰' + format(player.q.downquark) + 'ä¸‹å¤¸å…‹'},
               {"color": "#FFFFFF", "font-size": "20px"}],
            ["display-text",
                function() {
                    if(hasUpgrade("q",24)) return 'ä½ æœ‰' + format(player.q.squark) + 'å¥‡å¤¸å…‹'
                },
               {"color": "#FFFFFF", "font-size": "20px"}],
            ["display-text",
                function() {
                    if(hasUpgrade("q",31)) return 'ä½ æœ‰' + format(player.q.cquark) + 'ç²²å¤¸å…‹'
                },
               {"color": "#FFFFFF", "font-size": "20px"}],
            ["display-text",
                function() {
                    if(hasUpgrade("q",35)) return 'ä½ æœ‰' + format(player.q.bquark) + 'åº•å¤¸å…‹'
                },
               {"color": "#FFFFFF", "font-size": "20px"}],
            ["display-text",
                function() {
                    if(hasUpgrade("q",35)) return 'ä½ æœ‰' + format(player.q.tquark) + 'é¡¶å¤¸å…‹'
                },
               {"color": "#FFFFFF", "font-size": "20px"}],
            ],},
        "å¤¸å…‹ç ”ç©¶æ ‘": {
            content: [
            ["display-text",
                function() {return 'ä½ æœ‰' + format(player.q.quarkpts) + 'å¤¸å…‹ç ”ç©¶ç‚¹æ•°'},
               {"color": "#FFFFFF", "font-size": "15px"}],
            ["display-text",
                function() {return 'æˆ‘å°±tmåæ‚”å†™è¿™ç©æ„'},
               {"color": "#FF0000", "font-size": "15px"}],
            "buyables",
            ["row",[["clickable",41]]],"blank","blank",
            ["row",[["clickable",51]]],"blank",
            ["row",[["clickable",61],["clickable",62]]],"blank",
            ["row",[["clickable",71],["clickable",72]]],"blank",
            ["row",[["clickable",81],["clickable",82]]],"blank",
            ["row",[["clickable",91]]],"blank",
            ["row",[["clickable",101],["clickable",102],["clickable",103]]],"blank",
            ["row",[["clickable",111]]],"blank",
            ["row",[["clickable",121]]]
            ],
            unlocked(){
                return hasUpgrade("q",33)
            }
        },
        "åº•å¤¸å…‹&é¡¶å¤¸å…‹":{
            content: [
                ["display-text",
                    function() {
                        if(hasUpgrade("q",35)) return 'ä½ æœ‰' + format(player.q.bquark) + 'åº•å¤¸å…‹'
                    },
                   {"color": "#FFFFFF", "font-size": "20px"}],
                ["display-text",
                    function() {
                        if(hasUpgrade("q",35)) return 'ä½ æœ‰' + format(player.q.tquark) + 'é¡¶å¤¸å…‹'
                    },
                   {"color": "#FFFFFF", "font-size": "20px"}],
                ["display-text",
                    function() {
                        if(hasUpgrade("q",35)) return 'å’•å’•å’•'
                    },
                   {"color": "#FFFFFF", "font-size": "70px"}],
            ],
            unlocked(){
                return hasUpgrade("q",35)
            }
        }
    },
    upgrades: {
        11: {
            title:"å¤¸å…‹èƒ½é‡æœ‰æ•ˆæœäº†",
            description(){return "è®©ä¸Šå¤¸å…‹èƒ½é‡å€å¢ç†µè·å–<br>å½“å‰ï¼šx" + format(upgradeEffect("q",11))},
            cost: new Decimal(500),currencyDisplayName:"ä¸Šå¤¸å…‹èƒ½é‡",currencyInternalName:"up_quark_energy",currencyLayer:"q",
            effect(){
                return player.q.up_quark_energy.add(1).log(1.5).add(1)
            },
        },
        12: {
            title:"ä¸Šå¤©çš„ç¬¬ä¸€æ­¥",
            description(){return "è®©ä¸Šå¤¸å…‹èƒ½é‡å€å¢ä¸‹å¤¸å…‹èƒ½é‡è·å–<br>å½“å‰ï¼šx" + format(upgradeEffect("q",12))},
            cost: new Decimal(20000),currencyDisplayName:"ä¸Šå¤¸å…‹èƒ½é‡",currencyInternalName:"up_quark_energy",currencyLayer:"q",
            effect(){
                return player.q.up_quark_energy.add(1).log(2).add(1)
            },
        },
        13: {
            title:"ä¸Šå¤©çš„ç¬¬äºŒæ­¥",
            description(){return "è®©ä¸‹å¤¸å…‹èƒ½é‡å€å¢ä¸Šå¤¸å…‹èƒ½é‡è·å–<br>å½“å‰ï¼šx" + format(upgradeEffect("q",13))},
            cost: new Decimal(100000),currencyDisplayName:"ä¸‹å¤¸å…‹èƒ½é‡",currencyInternalName:"down_quark_energy",currencyLayer:"q",
            effect(){
                return player.q.down_quark_energy.add(1).log(2).add(1)
            },
        },
        14: {
            title:"ä¸Šä¸äº†ä¸€ç‚¹å¤©",
            description(){return "è®©ä¸‹å¤¸å…‹èƒ½é‡å€å¢ç†µè·å–<br>å½“å‰ï¼šx" + format(upgradeEffect("q",14))},
            cost: new Decimal(200000),currencyDisplayName:"ä¸‹å¤¸å…‹èƒ½é‡",currencyInternalName:"down_quark_energy",currencyLayer:"q",
            effect(){
                return player.q.down_quark_energy.add(1).log(1.1).add(1)
            },
        },
        15: {
            title:"é€ƒç¦»ç‚¹å‡»",
            description(){return "è®©å¤¸å…‹è·å¾—å˜ä¸ºåŸæ¥çš„100å€"},
            cost: new Decimal(100),
        },
        21: {
            title:"æ›´å¤š",
            description(){return "åŸºäºå¤¸å…‹æ•°é‡å€å¢ç†µè·å–<br>å½“å‰ï¼šx" + format(upgradeEffect("q",21))},
            cost: new Decimal(10000),
            effect(){
                return player.q.points.add(1).root(1.5)
            },
        },
        22: {
            title:"äºŒæ¬¡é€ƒç¦»ç‚¹å‡»",
            description(){return "å°†ä¸Šå¤¸å…‹å’Œä¸‹å¤¸å…‹æ•°é‡é”å®šåœ¨å¤¸å…‹æ•°é‡çš„200%"},
            cost: new Decimal(500000),
            unlocked(){
                return hasUpgrade("p",33)
            },
        },
        23: {
            title:"ç¬¬ä¸‰æ¬¡é€ƒç¦»ç‚¹å‡»",
            description(){return "æ¯ç§’è·å¾—1000%çš„å¤¸å…‹"},
            cost: new Decimal(3000000),
            unlocked(){
                return hasUpgrade("p",33)
            },
        },
        24: {
            title:"æ›´å¤šç±»å‹",
            description(){return "å…è®¸ä½¿ç”¨ä½ çš„ä¸Šå¤¸å…‹èƒ½é‡å’Œä¸‹å¤¸å…‹èƒ½é‡åŠ é€Ÿå¤¸å…‹ä»¥å¯¹æ’å¥‡å¤¸å…‹ï¼ˆèƒ¡è¯´å…«é“ingï¼‰"},
            cost: new Decimal(50000000),
            unlocked(){
                return hasUpgrade("p",33)
            },
        },
        25: {
            title:"å¥‡å¤¸å…‹æ²¡æœ‰æ•ˆæœæ€ä¹ˆè¡Œ",
            description(){return "åŸºäºå¥‡å¤¸å…‹æ•°é‡å€å¢ç†µ<br>å½“å‰ï¼šx" + format(upgradeEffect("q",25))},
            cost: new Decimal(30000),currencyDisplayName:"å¥‡å¤¸å…‹",currencyInternalName:"squark",currencyLayer:"q",
            effect(){
                return player.q.squark.add(1).pow(1.5)
            },
            unlocked(){
                return hasUpgrade("p",33)
            },
        },
        31: {
            title:"æ›´å¤šç±»å‹2",
            description(){return "å…è®¸ä½¿ç”¨ä½ çš„ä¸Šå¤¸å…‹èƒ½é‡å’Œä¸‹å¤¸å…‹èƒ½é‡åŠ é€Ÿå¤¸å…‹ä»¥å¯¹æ’ç²²å¤¸å…‹"},
            cost: new Decimal("1e14"),
            unlocked(){
                return hasUpgrade("p",24)
            },
        },
        32: {
            title:"å†™å‡çº§é‡Œç¡®å®æ–¹ä¾¿ï¼ˆåˆ’æ‰ï¼‰",
            description(){return "åŸºäºç²²å¤¸å…‹å€å¢ç†µ<br>å½“å‰ï¼šx" + format(upgradeEffect("q",32))},
            cost: new Decimal("2e7"),currencyDisplayName:"ç²²å¤¸å…‹",currencyInternalName:"cquark",currencyLayer:"q",
            effect(){
                return player.q.cquark.add(1).pow(1.3)
            },
            unlocked(){
                return hasUpgrade("p",24)
            },
        },
        33: {
            title:"æ˜¯ç­–ç•¥ï¼ŒåŠ é€Ÿæ²¡æ•‘äº†",
            description(){return "è§£é”å¤¸å…‹ç ”ç©¶æ ‘"},
            cost: new Decimal("1e16"),
            unlocked(){
                return hasUpgrade("p",24)
            },
        },
        34: {
            title:"ä½ æˆåŠŸè¢«è¿™ä¸ªä¸ºäº†å¹³è¡¡çš„è½¯ä¸Šé™å¡ä½äº†",
            description(){return "å…ˆç»™QoLï¼Œæ¯tickè·å¾—100%å°†è¦è·å¾—çš„å¥‡å¤¸å…‹å’Œç²²å¤¸å…‹"},
            cost: new Decimal("1e103"),
            unlocked(){
                return player.q.points.max("1e100") == player.q.points
            },
        },
        35: {
            title:"6ç§",
            description(){return "è§£é”æ›´å¤šç§ç±»çš„å¤¸å…‹"},
            cost: new Decimal("1e103"),
            unlocked(){
                return hasUpgrade("q",34)
            },
        },
    },
    buyables: {
        11: {
            title: "å¤¸å…‹ç ”ç©¶",
            cost(x) {
                let bas = new Decimal(100)
                return new Decimal(1e16).mul(bas.pow(x))
            },
            display() { 
                let disp = "è·å¾—1ç ”ç©¶ç‚¹<br>æ€»è®¡ï¼š+" + format(buyableEffect("q",11))
                disp = disp + "<br>ä»·æ ¼ï¼š" + format(this.cost()) + "<br>æ•°é‡ï¼š" + format(getBuyableAmount("q",11))
                return disp
            },
            canAfford() { return player[this.layer].points.gte(this.cost()) },
            buy() {
                player[this.layer].points = player[this.layer].points.sub(this.cost())
                setBuyableAmount(this.layer, this.id, getBuyableAmount(this.layer, this.id).add(1))
                player.q.quarkpts = player.q.quarkpts.add(1)
                player.q.totalquarkpts = player.q.totalquarkpts.add(1)
            },
            effect(){
                return getBuyableAmount("q",11)
            },
            style: {'height':'100px'},
        },
        12: {
            title: "ç†µç ”ç©¶",
            cost(x) {
                let bas = new Decimal(1e10)
                return new Decimal("1e400").mul(bas.pow(x))
            },
            display() { 
                let disp = "è·å¾—1ç ”ç©¶ç‚¹<br>æ€»è®¡ï¼š+" + format(buyableEffect("q",12))
                disp = disp + "<br>ä»·æ ¼ï¼š" + format(this.cost()) + "<br>æ•°é‡ï¼š" + format(getBuyableAmount("q",12))
                return disp
            },
            canAfford() { return player.p.pts.gte(this.cost()) },
            buy() {
                player.p.pts = player.p.pts.sub(this.cost())
                setBuyableAmount(this.layer, this.id, getBuyableAmount(this.layer, this.id).add(1))
                player.q.quarkpts = player.q.quarkpts.add(1)
                player.q.totalquarkpts = player.q.totalquarkpts.add(1)
            },
            effect(){
                return getBuyableAmount("q",12)
            },
            unlocked(){
                return getClickableState("q",121) == 1
            },
            style: {'height':'100px'},
        },
    },
    clickables:{
        11: {
            title: "è½¬æ¢ä¸Šå¤¸å…‹",
            display(){return "å°†ä½ 1å¤¸å…‹è½¬åŒ–ä¸º1ä¸Šå¤¸å…‹"},
            onClick(){
                player.q.points = player.q.points.sub(1)
                player.q.upquark = player.q.upquark.add(1)
            },
            canClick(){
                return player.q.points >= 1
            },
        },
        12: {
            title: "è½¬æ¢ä¸‹å¤¸å…‹",
            display(){return "å°†ä½ 1å¤¸å…‹è½¬åŒ–ä¸º1ä¸‹å¤¸å…‹"},
            onClick(){
                player.q.points = player.q.points.sub(1)
                player.q.downquark = player.q.downquark.add(1)
            },
            canClick(){
                return player.q.points >= 1
            },
        },
        21: {
            title: "ç™¾åˆ†æ¯”è½¬æ¢ä¸Šå¤¸å…‹",
            display(){return "å°†ä½ 10%å¤¸å…‹è½¬åŒ–ä¸ºä¸Šå¤¸å…‹"},
            onClick(){
                player.q.upquark = player.q.upquark.add(player.q.points.mul(0.1))
                player.q.points = player.q.points.sub(player.q.points.mul(0.1))
            },
            canClick(){
                return player.q.points >= 1
            },
        },
        22: {
            title: "ç™¾åˆ†æ¯”è½¬æ¢ä¸‹å¤¸å…‹",
            display(){return "å°†ä½ 10%å¤¸å…‹è½¬åŒ–ä¸ºä¸‹å¤¸å…‹"},
            onClick(){
                player.q.downquark = player.q.downquark.add(player.q.points.mul(0.1))
                player.q.points = player.q.points.sub(player.q.points.mul(0.1))
            },
            canClick(){
                return player.q.points >= 1
            },
        },
        31: {
            title: "å¯¹æ’å¥‡å¤¸å…‹",
            display(){return "å°†ä½ 50%çš„å¤¸å…‹å¯¹æ’æˆä¸ºå¥‡å¤¸å…‹"},
            onClick(){
                player.q.squark = player.q.squark.add(player.q.points.div(10000))
                player.q.points = player.q.points.mul(0.5)
            },
            canClick(){
                return player.q.points >= 20000
            },
            unlocked(){
                return hasUpgrade("q",24)
            }
        },
        32: {
            title: "å¯¹æ’ç²²å¤¸å…‹",
            display(){return "å°†ä½ 50%çš„å¤¸å…‹å¯¹æ’æˆä¸ºå¥‡å¤¸å…‹"},
            onClick(){
                player.q.cquark = player.q.cquark.add(player.q.points.div(1e8))
                player.q.points = player.q.points.mul(0.5)
            },
            canClick(){
                return player.q.points >= 2e8
            },
            unlocked(){
                return hasUpgrade("q",31)
            }
        },
        41: {
            title: "æ´—ç‚¹",
            display(){return "é‡ç½®ä½ çš„å¤¸å…‹ç ”ç©¶"},
            onClick(){
                for (let i in layers.q.clickables)
                    if (!["11","12","21","22","31","32","41"].includes(i))
                        setClickableState("q",i,0)
                player.q.quarkpts = player.q.totalquarkpts
            },
            canClick(){
                return true
            },
        },
        51: {
            title:"å¼€å§‹çš„æ—¶å€™ç®€å•ä¸€ç‚¹",
            display(){return "å°†ç†µè·å¾—x1e10<br>ä»·æ ¼ï¼š1å¤¸å…‹ç ”ç©¶ç‚¹"},
            canClick(){
                return player.q.quarkpts >= 1 && getClickableState(this.layer,this.id) != 1
            },
            onClick(){
                player.q.quarkpts = player.q.quarkpts.sub(1)
                setClickableState(this.layer, this.id,1)
            },
            style() { 
                if(getClickableState(this.layer,this.id)==1) return {'background-color' : "#77BF5F"}
                else{
                    if(layers.q.clickables[this.id].canClick()) return {'background-color' : "#cc00cc"}
                    else return {'background-color' : "#BF8F8F"}
                }
            },
        },
        61: {
            title:"ç²’å­åŠ æˆ",
            display(){return "å°†ç²’å­è·å¾—x1e5<br>ä»·æ ¼ï¼š1å¤¸å…‹ç ”ç©¶ç‚¹"},
            canClick(){
                let canc = player.q.quarkpts >= 1 && getClickableState(this.layer,this.id) != 1 && getClickableState("q",51) == 1
                if(getClickableState("q",111) != 1) canc = canc && getClickableState("q",62) == 0
                return canc
            },
            onClick(){
                player.q.quarkpts = player.q.quarkpts.sub(1)
                setClickableState(this.layer, this.id,1)
            },
            style() { 
                if(getClickableState(this.layer,this.id)==1) return {'background-color' : "#77BF5F"}
                else{
                    if(layers.q.clickables[this.id].canClick()) return {'background-color' : "#cc00cc"}
                    else return {'background-color' : "#BF8F8F"}
                }
            },
            branches(){return ["51"]}
        },
        62: {
            title:"å¤¸å…‹åŠ æˆ",
            display(){return "å°†å¤¸å…‹è·å¾—x1e2<br>ä»·æ ¼ï¼š1å¤¸å…‹ç ”ç©¶ç‚¹"},
            canClick(){
                let canc = player.q.quarkpts >= 1 && getClickableState(this.layer,this.id) != 1 && getClickableState("q",51) == 1
                if(getClickableState("q",111) != 1) canc = canc && getClickableState("q",61) == 0
                return canc
            },
            onClick(){
                player.q.quarkpts = player.q.quarkpts.sub(1)
                setClickableState(this.layer, this.id,1)
            },
            style() { 
                if(getClickableState(this.layer,this.id)==1) return {'background-color' : "#77BF5F"}
                else{
                    if(layers.q.clickables[this.id].canClick()) return {'background-color' : "#cc00cc"}
                    else return {'background-color' : "#BF8F8F"}
                }
            },
            branches(){return ["51"]}
        },
        71: {
            title:"ç†µåŠ æˆ",
            display(){return "åŸºäºå¤¸å…‹è¿›ä¸€æ­¥å€å¢ç†µ<br>ä»·æ ¼ï¼š2å¤¸å…‹ç ”ç©¶ç‚¹<br>æ•ˆæœï¼šx" + format(this.effect())},
            effect(){
                return player.q.points.add(1).root(3)
            },
            canClick(){
                let canc = player.q.quarkpts >= 2 && getClickableState(this.layer,this.id) != 1 && getClickableState("q",61) == 1
                return canc
            },
            onClick(){
                player.q.quarkpts = player.q.quarkpts.sub(2)
                setClickableState(this.layer, this.id,1)
            },
            style() { 
                if(getClickableState(this.layer,this.id)==1) return {'background-color' : "#77BF5F"}
                else{
                    if(layers.q.clickables[this.id].canClick()) return {'background-color' : "#cc00cc"}
                    else return {'background-color' : "#BF8F8F"}
                }
            },
            branches(){return ["61"]}
        },
        72: {
            title:"å¤¸å…‹åŠ æˆ",
            display(){return "åŸºäºç²’å­å€å¢å¤¸å…‹<br>ä»·æ ¼ï¼š2å¤¸å…‹ç ”ç©¶ç‚¹<br>æ•ˆæœï¼šx" + format(this.effect())},
            effect(){
                return player.p.points.add(1).log(10).mul(5).add(1)
            },
            canClick(){
                let canc = player.q.quarkpts >= 2 && getClickableState(this.layer,this.id) != 1 && getClickableState("q",62) == 1
                return canc
            },
            onClick(){
                player.q.quarkpts = player.q.quarkpts.sub(2)
                setClickableState(this.layer, this.id,1)
            },
            style() { 
                if(getClickableState(this.layer,this.id)==1) return {'background-color' : "#77BF5F"}
                else{
                    if(layers.q.clickables[this.id].canClick()) return {'background-color' : "#cc00cc"}
                    else return {'background-color' : "#BF8F8F"}
                }
            },
            branches(){return ["62"]}
        },
        81: {
            title:"ä¸Šå¤¸å…‹èƒ½é‡",
            display(){return "åŸºäºä¸Šå¤¸å…‹èƒ½é‡è¿›ä¸€æ­¥å€å¢ç†µ<br>ä»·æ ¼ï¼š2å¤¸å…‹ç ”ç©¶ç‚¹<br>æ•ˆæœï¼šx" + format(this.effect())},
            effect(){
                return player.q.up_quark_energy.add(1).root(4)
            },
            canClick(){
                let canc = player.q.quarkpts >= 2 && getClickableState(this.layer,this.id) != 1 && getClickableState("q",71) == 1
                return canc
            },
            onClick(){
                player.q.quarkpts = player.q.quarkpts.sub(2)
                setClickableState(this.layer, this.id,1)
            },
            style() { 
                if(getClickableState(this.layer,this.id)==1) return {'background-color' : "#77BF5F"}
                else{
                    if(layers.q.clickables[this.id].canClick()) return {'background-color' : "#cc00cc"}
                    else return {'background-color' : "#BF8F8F"}
                }
            },
            branches(){return ["71"]}
        },
        82: {
            title:"ä¸‹å¤¸å…‹èƒ½é‡",
            display(){return "åŸºäºä¸‹å¤¸å…‹èƒ½é‡å€å¢å¤¸å…‹<br>ä»·æ ¼ï¼š2å¤¸å…‹ç ”ç©¶ç‚¹<br>æ•ˆæœï¼šx" + format(this.effect())},
            effect(){
                return player.q.down_quark_energy.add(1).log(2).mul(3).add(1)
            },
            canClick(){
                let canc = player.q.quarkpts >= 2 && getClickableState(this.layer,this.id) != 1 && getClickableState("q",72) == 1
                return canc
            },
            onClick(){
                player.q.quarkpts = player.q.quarkpts.sub(2)
                setClickableState(this.layer, this.id,1)
            },
            style() { 
                if(getClickableState(this.layer,this.id)==1) return {'background-color' : "#77BF5F"}
                else{
                    if(layers.q.clickables[this.id].canClick()) return {'background-color' : "#cc00cc"}
                    else return {'background-color' : "#BF8F8F"}
                }
            },
            branches(){return ["72"]}
        },
        91: {
            title:"å…¬å¼æ”¹è¿›",
            display(){return "è®©ä¸Šå¤¸å…‹èƒ½é‡å’Œä¸‹å¤¸å…‹èƒ½é‡çš„è·å¾—å…¬å¼æ›´å¥½<br>ä»·æ ¼ï¼š2å¤¸å…‹ç ”ç©¶ç‚¹"},
            canClick(){
                let canc = player.q.quarkpts >= 2 && getClickableState(this.layer,this.id) != 1 && (getClickableState("q",81) == 1 || getClickableState("q",82) == 1)
                return canc
            },
            onClick(){
                player.q.quarkpts = player.q.quarkpts.sub(2)
                setClickableState(this.layer, this.id,1)
            },
            style() { 
                if(getClickableState(this.layer,this.id)==1) return {'background-color' : "#77BF5F"}
                else{
                    if(layers.q.clickables[this.id].canClick()) return {'background-color' : "#cc00cc"}
                    else return {'background-color' : "#BF8F8F"}
                }
            },
            branches(){return ["81","82"]}
        },
        101: {
            title:"è½¯ä¸Šé™å¼±åŒ–",
            display(){return "åŸºäºå¤¸å…‹å¼±åŒ–ç†µçš„è½¯ä¸Šé™(æœ€å¤š50%)(å‚»é€¼æ‡’çš„æ”¹äº†)<br>ä»·æ ¼ï¼š8å¤¸å…‹ç ”ç©¶ç‚¹<br>å½“å‰æ•ˆæœï¼šå¼±åŒ–" + format(clickableEffect("q",101)) + "%"},
            effect(){
                return player.q.points.add(1).log(10).div(2).add(1).min(50)
            },
            canClick(){
                let canc = player.q.quarkpts >= 8 && getClickableState(this.layer,this.id) != 1 && getClickableState("q",91) == 1
                if(getClickableState("q",111) != 1) canc = canc && !getClickableState("q",102) == 1 && !getClickableState("q",103) == 1
                return canc
            },
            onClick(){
                player.q.quarkpts = player.q.quarkpts.sub(8)
                setClickableState(this.layer, this.id,1)
            },
            style() { 
                if(getClickableState(this.layer,this.id)==1) return {'background-color' : "#77BF5F"}
                else{
                    if(layers.q.clickables[this.id].canClick()) return {'background-color' : "#cc00cc"}
                    else return {'background-color' : "#BF8F8F"}
                }
            },
            unlocked(){
                return hasUpgrade("uc",13)
            },
            branches(){return ["91"]}
        },
        102: {
            title:"å¼ºåŠ›å¢é•¿",
            display(){return "åŸºäºæ€»å¤¸å…‹ç ”ç©¶ç‚¹å€å¢ç†µ<br>ä»·æ ¼ï¼š8å¤¸å…‹ç ”ç©¶ç‚¹<br>å½“å‰æ•ˆæœï¼šx" + format(clickableEffect("q",102))},
            effect(){
                let bas = five
                return bas.pow(player.q.totalquarkpts)
            },
            canClick(){
                let canc = player.q.quarkpts >= 8 && getClickableState(this.layer,this.id) != 1 && getClickableState("q",91) == 1
                if(getClickableState("q",111) != 1) canc = canc && !getClickableState("q",101) == 1 && !getClickableState("q",103) == 1
                return canc
            },
            onClick(){
                player.q.quarkpts = player.q.quarkpts.sub(8)
                setClickableState(this.layer, this.id,1)
            },
            style() { 
                if(getClickableState(this.layer,this.id)==1) return {'background-color' : "#77BF5F"}
                else{
                    if(layers.q.clickables[this.id].canClick()) return {'background-color' : "#cc00cc"}
                    else return {'background-color' : "#BF8F8F"}
                }
            },
            unlocked(){
                return hasUpgrade("uc",13)
            },
            branches(){return ["91"]}
        },
        103: {
            title:"æŒ‡æ•°",
            display(){return "è®©å¤¸å…‹è·å¾—æŒ‡æ•°+0.2<br>ä»·æ ¼ï¼š8å¤¸å…‹ç ”ç©¶ç‚¹<br>"},
            effect(){
                let bas = three
                return bas.pow(player.q.totalquarkpts)
            },
            canClick(){
                let canc = player.q.quarkpts >= 8 && getClickableState(this.layer,this.id) != 1 && getClickableState("q",91) == 1
                if(getClickableState("q",111) != 1) canc = canc && !getClickableState("q",101) == 1 && !getClickableState("q",102) == 1
                return canc
            },
            onClick(){
                player.q.quarkpts = player.q.quarkpts.sub(8)
                setClickableState(this.layer, this.id,1)
            },
            style() { 
                if(getClickableState(this.layer,this.id)==1) return {'background-color' : "#77BF5F"}
                else{
                    if(layers.q.clickables[this.id].canClick()) return {'background-color' : "#cc00cc"}
                    else return {'background-color' : "#BF8F8F"}
                }
            },
            unlocked(){
                return hasUpgrade("uc",13)
            },
            branches(){return ["91"]}
        },
        111: {
            title:"è´­ä¹°æ‰€æœ‰",
            display(){return "å¯ä»¥åŒæ—¶è´­ä¹°è¿™ä¸ªæ ‘çš„æ‰€æœ‰å‡çº§(ç»å¯¹ä¸æ˜¯ä½œè€…ä¸æƒ³åšäº†<br>ä»·æ ¼ï¼š14å¤¸å…‹ç ”ç©¶ç‚¹<br>"},
            canClick(){
                let canc = player.q.quarkpts >= 14 && getClickableState(this.layer,this.id) != 1 && (getClickableState("q",101) == 1 || getClickableState("q",102) == 1 || getClickableState("q",103) == 1)
                return canc
            },
            onClick(){
                player.q.quarkpts = player.q.quarkpts.sub(14)
                setClickableState(this.layer, this.id,1)
            },
            style() { 
                if(getClickableState(this.layer,this.id)==1) return {'background-color' : "#77BF5F"}
                else{
                    if(layers.q.clickables[this.id].canClick()) return {'background-color' : "#cc00cc"}
                    else return {'background-color' : "#BF8F8F"}
                }
            },
            unlocked(){
                return hasUpgrade("uc",13)
            },
            branches(){return ["101","102","103"]}
        },
        121: {
            title:"æœ€ä¾¿å®œçš„ä¸€æ¬¡",
            display(){return "å¯ä»¥ä½¿ç”¨ç†µè´­ä¹°å¤¸å…‹ç ”ç©¶ç‚¹<br>ä»·æ ¼ï¼š1å¤¸å…‹ç ”ç©¶ç‚¹<br>"},
            canClick(){
                let canc = player.q.quarkpts >= 1 && getClickableState(this.layer,this.id) != 1 && getClickableState("q",111) == 1
                return canc
            },
            onClick(){
                player.q.quarkpts = player.q.quarkpts.sub(1)
                setClickableState(this.layer, this.id,1)
            },
            style() { 
                if(getClickableState(this.layer,this.id)==1) return {'background-color' : "#77BF5F"}
                else{
                    if(layers.q.clickables[this.id].canClick()) return {'background-color' : "#cc00cc"}
                    else return {'background-color' : "#BF8F8F"}
                }
            },
            unlocked(){
                return hasUpgrade("uc",13)
            },
            branches(){return ["111"]}
        },
    },

    passiveGeneration(){
        if(hasUpgrade("q",23)) return 10
        else return 0
    },
    row: 0,
    hotkeys: [
        {key: "q", description: "Q: è¿›è¡Œå¤¸å…‹é‡ç½®", onPress(){if (canReset(this.layer)) doReset(this.layer)}},
    ],
    layerShown(){
        if(hasUpgrade("p",32) && (inChallenge("u",22) || hasChallenge("u",22))) return true
        else return false
    }
})
addLayer("u", {
    infoboxes:{
        introBox:{
            title:"å®‡å®™",
            body(){
                return "å“¦ï¼Œæˆ‘çš„ä¸Šå¸å•Š<br>å®‡å®™ä¸å°å¿ƒçƒ­å¯‚äº†"
            }
        },
    },
    name: "è¢«æ ¸å¼¹ç‚¸æ­»çš„å®‡å®™",
    symbol: "u",
    position: 0,
    startData() { return {
        unlocked: false,
		points: new Decimal(0),
        uni: new Decimal(0),
        temperature: new Decimal(3),
        temeffect: new Decimal(1),
        layerceff: new Decimal(0),
    }},
    color: "#999999",
    requires: new Decimal(1e120),
    resource: "è¢«æ ¸å¼¹ç‚¸æ­»çš„å®‡å®™",
    baseResource: "ç†µ",
    baseAmount() {return player.points},
    type: "normal",
    exponent: 0.004,
    softcap: new Decimal("1e880"), 
    softcapPower: new Decimal(0.2), 
    branches(){return ["p","c"]},
    unigain(){
        let gain = new Decimal(0)
        if(hasChallenge("u",12)) gain = gain.add(1)
        if(hasUpgrade("u",24)) gain = gain.mul(upgradeEffect("u",24))
        gain = gain.mul(buyableEffect("u",11))
        gain = gain.mul(buyableEffect("u",12))
        gain = gain.mul(buyableEffect("u",13))
        if(hasUpgrade("u",34)) gain = gain.mul(upgradeEffect("u",34))
        if(hasUpgrade("e",13)) gain = gain.mul(upgradeEffect("e",13))
        gain = gain.pow(player.u.temeffect)
        return gain
    },
    update(diff){
        player.u.uni = player.u.uni.add(tmp.u.unigain.mul(diff))
        player.u.temeffect = player.u.temperature.sub(3).add(1).log(5).add(1)
        player.u.layerceff = player.c.points.div(10).add(1).log(10).div(10000).add(3)
    },
    gainMult() {
        mult = new Decimal(1)
        if(hasUpgrade("e",13)) mult = mult.mul(upgradeEffect("e",13))
        return mult
    },
    gainExp() {
        exp = new Decimal(1)
        if(hasChallenge("u",21)) exp = exp.add(challengeEffect("u",21))
        if(hasUpgrade("u",31)) exp = exp.add(upgradeEffect("u",31))
        if(hasUpgrade("u",32)) exp = exp.add(upgradeEffect("u",32))
        if(hasUpgrade("u",33)) exp = exp.add(upgradeEffect("u",33))
        return exp
    },
    tabFormat: {
        "é¢": {
            content: [ ["infobox","introBox"],"main-display","prestige-button",
            ["display-text",
                function() {return 'å½“ä¸€æ¬¡é‡ç½®è·å¾—çš„è¢«æ ¸å¼¹ç‚¸æ­»çš„å®‡å®™æ•°é‡è¶…è¿‡1e880æ—¶ï¼Œè¶…å‡ºéƒ¨åˆ†å°†è¢«5æ¬¡æ ¹'},
               {"color": "#FFFFFF", "font-size": "20px" }],
               "upgrades"],},
        "ä»¤äººå—å±çš„ç•Œé¢": {
            content: [ ["infobox","introBox"],"main-display","challenges"],
            unlocked(){return hasUpgrade('u',14)}
        },
        "å‚»é€¼ä¹‹åŠ›é‡": {
            content: [["display-text",
                function() {return 'ä½ æœ‰' + format(player.u.uni) + 'å‚»é€¼å®‡å®™åŠ›é‡'},
               {"color": "#FFFFFF", "font-size": "20px" }],
                "buyables"],
            unlocked(){return hasChallenge("u",12)}
        },
        "æ¸©åº¦": {
            content: [["display-text",
                function() {return 'å®‡å®™çš„å¾®æ³¢èƒŒæ™¯è¾å°„æ¸©åº¦ä¸º' + format(player.u.temperature) + 'å¼€å°”æ–‡,å°†å‚»é€¼å®‡å®™åŠ›é‡å’Œç†µæé«˜åˆ°' + format(player.u.temeffect) + "æ¬¡æ–¹"},
               {"color": "#FFFFFF", "font-size": "20px" }],
               "clickables"],
            unlocked(){return hasUpgrade("e",33)}
        },
    },
    
    
    upgrades: {
        11: {
            title:"æè¿°æè¿°ä½ çš„å®‡å®™è¢«æ¯ç­äº†",
            description(){return "ä½ çš„å®‡å®™è¢«10^1145141919810ä¸ªæ ¸å¼¹ç‚¸æ­»äº†ï¼Œå¹¶ä¸”è¢«10^9*10^15åç‰©è´¨ç‚¸çš„æ­»çš„ä¸èƒ½å†æ­»äº†ï¼Œè€Œä¸”è¢«K9e15æ”»å‡»çš„ææ€–é³—é±¼æ‰“æˆäº†å‚»é€¼ã€‚æ‰€ä»¥å®‡å®™è¦è¿›è¡Œå¤ä»‡ï¼Œä½¿ä½ çš„ç†µï¼Œç²’å­ï¼Œå¤©ä½“æ•°é‡x10,å¹¶ä¸”ä½¿ä½ çš„ç†µ^1.02(ä¸‹ä¸€ä¸ªå‡çº§åœ¨3è¢«æ ¸å¼¹ç‚¸æ­»çš„å®‡å®™)<br>"},
            cost: new Decimal(0),
            unlocked(){
                if(player.u.points > 0) return true
                else return false
            }
        },
        12: {
            title:"ä½ çš„å®‡å®™è§‰å¾—è‡ªå·±å±Œçˆ†äº†",
            description(){return "å®‡å®™è¢«ä½œè€…åˆ¶è£äº†ï¼Œæ‰€ä»¥åªèƒ½è®©ä½ çš„ç†µ^1.1(ä¸‹ä¸€ä¸ªå‡çº§åœ¨10è¢«æ ¸å¼¹ç‚¸æ­»çš„å®‡å®™)<br>"},
            cost: new Decimal(0),
            unlocked(){
                if(player.u.points > 2) return true
                else return false
            }
        },
        13: {
            title:"QoL:ä¸–ç•Œé—å¿˜æˆ‘",
            description(){return "ä½ çš„å®‡å®™è§‰å¾—è¿˜æ˜¯å¤ªæ…¢äº†ï¼Œäºæ˜¯ç²’å­å’Œå¤©ä½“çš„æŒ‡æ•°+0.1(ä¸‹ä¸€ä¸ª20)<br>"},
            cost: new Decimal(0),
            unlocked(){
                if(player.u.points > 9) return true
                else return false
            }
        },
        14: {
            title:"å®‡å®™å†³å®šæ°”ç‚¸ç©å®¶",
            description(){return "è§£é”æŒ‘æˆ˜(ä¸‹ä¸€ä¸ª30)<br>"},
            cost: new Decimal(0),
            unlocked(){
                if(player.u.points > 19) return true
                else return false
            }
        },
        15: {
            title:"å®‡å®™è®¤ä¸ºä½ å¤ªnbäº†",
            description(){return "ä½¿ç²’å­å’Œå¤©ä½“çš„æŒ‡æ•°+0.2(50)<br>"},
            cost: new Decimal(0),
            unlocked(){
                if(player.u.points > 29) return true
                else return false
            }
        },
        21: {
            title:"è¢«æ ¸å¼¹ç‚¸æ­»çš„å®‡å®™å¤ªfvväº†",
            description(){
                if(!hasUpgrade("e",22)) return "ä½¿ä½ çš„è¢«æ ¸å¼¹ç‚¸æ­»çš„å®‡å®™å°†ç†µæé«˜<br>å½“å‰æ•ˆæœï¼š^" + format(upgradeEffect("u",21))
                else return "ä½¿ä½ çš„è¢«æ ¸å¼¹ç‚¸æ­»çš„å®‡å®™å€å¢æ’æ˜Ÿè´¨é‡å’Œè¶…é‡å…ƒç´ è·å–<br>å½“å‰æ•ˆæœï¼šx" + format(upgradeEffect("u",21))
            },
            cost: new Decimal(0),
            effect(){
                if(!hasUpgrade("e",22)){
                    let effe = player.u.points.log(10).div(10).add(1)
                    if(effe.sub(2) > 0) effe = effe.sub(1).log(10).add(2)
                    if(effe.sub(3) > 0) effe = effe.sub(2).root(2).add(2)
                    return effe
                }
                else{
                    let effe = player.u.points.log(10).pow(5)
                    return effe
                }
                
            },
            unlocked(){
                if(player.u.points > 49) return true
                else return false
            },
        },
        22: {
            title:"ä½œè€…ä½¿ç”¨å¤šå…ƒå®‡å®™è¿›è¡Œäº†åŠ å¼º",
            description(){return "è§£é”ç¬¬äºŒä¸ªæŒ‘æˆ˜"},
            cost: new Decimal(0),
            unlocked(){
                if(player.u.points > 49) return true
                else return false
            },
        },
        23: {
            title:"å®‡å®™çš„æ™ºå•†è·Œç ´-250^2",
            description(){return "è®©å®‡å®™IQå€å‡ä»·æ ¼åŸºæ•°-1"},
            cost: new Decimal(2e7),currencyDisplayName:"å‚»é€¼å®‡å®™åŠ›é‡",currencyInternalName:"uni",currencyLayer:"u",
            unlocked(){
                if(hasChallenge("u",12)) return true
                else return false
            },
        },
        24: {
            title:"å‚»é€¼å®‡å®™ååŒ",
            description(){return "åŸºäºä½ çš„è¢«æ ¸å¼¹ç‚¸æ­»çš„å®‡å®™å¢åŠ å‚»é€¼å®‡å®™åŠ›é‡è·å–<br>å½“å‰:x" + format(upgradeEffect("u",24))},
            cost: new Decimal(5e16),currencyDisplayName:"å‚»é€¼å®‡å®™åŠ›é‡",currencyInternalName:"uni",currencyLayer:"u",
            effect(){
                return player.u.points.add(1).log(2).pow(2)
            },
            unlocked(){
                if(hasUpgrade("u",23)) return true
                else return false
            },
        },
        25: {
            title:"ä½œè€…è¿™ä¸ªå‚»é€¼ç»ˆäºæŒ‰QoLäº†ï¼Œä¸å¾—ç»™å¤šäº¿ç‚¹",
            description(){return "æ¯ç§’è·å¾—10000%çš„è¢«æ ¸å¼¹ç‚¸æ­»çš„å®‡å®™"},
            cost: new Decimal(1e27),currencyDisplayName:"å‚»é€¼å®‡å®™åŠ›é‡",currencyInternalName:"uni",currencyLayer:"u",
            unlocked(){
                if(hasUpgrade("u",24)) return true
                else return false
            },
        },
        26: {
            title:"r",
            description(){return "è§£é”æŒ‘æˆ˜3"},
            cost: new Decimal(100000),
            unlocked(){
                if(hasUpgrade("u",25)) return true
                else return false
            },
        },
        31: {
            title:"ç²’å­å®‡å®™",
            description(){return "åŸºäºç²’å­æ•°é‡å¢åŠ è¢«æ ¸å¼¹ç‚¸æ­»çš„å®‡å®™çš„æŒ‡æ•°<br>å½“å‰ï¼š+" + format(upgradeEffect("u",31))},
            cost: new Decimal(1e8),
            effect(){
                return player.p.points.add(1).log(10).root(2).div(30)
            },
            unlocked(){
                if(hasChallenge("u",21)) return true
                else return false
            },
        },
        32: {
            title:"å¤©ä½“å®‡å®™",
            description(){return "åŸºäºå¤©ä½“æ•°é‡å¢åŠ è¢«æ ¸å¼¹ç‚¸æ­»çš„å®‡å®™çš„æŒ‡æ•°<br>å½“å‰ï¼š+" + format(upgradeEffect("u",32))},
            cost: new Decimal(1e12),
            effect(){
                return player.c.points.add(1).log(10).root(2).div(30)
            },
            unlocked(){
                if(hasUpgrade("u",31)) return true
                else return false
            },
        },
        33: {
            title:"å®‡å®™è‡ªå¢",
            description(){return "åŸºäºè¢«æ ¸å¼¹ç‚¸æ­»çš„å®‡å®™æ•°é‡å¢åŠ è¢«æ ¸å¼¹ç‚¸æ­»çš„å®‡å®™çš„æŒ‡æ•°<br>å½“å‰ï¼š+" + format(upgradeEffect("u",33))},
            cost: new Decimal(1e15),
            effect(){
                return player.u.points.add(1).log(10).root(3).div(3)
            },
            unlocked(){
                if(hasUpgrade("u",32)) return true
                else return false
            },
        },
        34: {
            title:"å‚»é€¼å®‡å®™åŠ›é‡å€å¢",
            description(){return "åŸºäºè¢«æ ¸å¼¹ç‚¸æ­»çš„å®‡å®™æ•°é‡ä¹˜ä»¥å‚»é€¼å®‡å®™åŠ›é‡<br>å½“å‰ï¼šÃ—" + format(upgradeEffect("u",34))},
            cost: new Decimal(1e18),
            effect(){
                return player.u.points.add(1).root(3)
            },
            unlocked(){
                if(hasUpgrade("u",33)) return true
                else return false
            },
        },
        35: {
            title:"å‚»é€¼ä¹‹åŠ›é‡",
            description(){return "è§£é”ä¸€ä¸ªæ–°çš„å¯è´­ä¹°,å¹¶ä¸”è§£é”ä¸€ä¸ªæ–°å±‚çº§"},
            cost: new Decimal(1e23),
            unlocked(){
                if(hasUpgrade("u",34)) return true
                else return false
            },
        },
        41: {
            title:"åŠ›é‡",
            description(){return "è®©å‚»é€¼å®‡å®™åŠ›é‡å€å¢è¶…é‡å…ƒç´ è·å¾—<br>å½“å‰ï¼šx" + format(upgradeEffect("u",41))},
            cost: new Decimal("1e2500"),currencyDisplayName:"å‚»é€¼å®‡å®™åŠ›é‡",currencyInternalName:"uni",currencyLayer:"u",
            effect(){
                return player.u.uni.add(1).log(10).pow(2)
            },
            unlocked(){
                if(hasUpgrade("e",33)) return true
                else return false
            },
        },
        42: {
            title:"è§£é”æŒ‘æˆ˜4",
            description(){return "æŒ‘æˆ˜é‚£é‡Œç©ºç€ä¸€å—å¾ˆéš¾çœ‹æ˜¯å§ï¼Œç°åœ¨è¡¥ä¸Š"},
            cost: new Decimal("1e950"),
            unlocked(){
                if(hasUpgrade("u",41)) return true
                else return false
            },
        },
        91: {
            title:"æè¿°æè¿°æè¿°æè¿°æè¿°æè¿°æè¿°æè¿°",
            description(){return "ä¸ºä»€ä¹ˆæˆ‘ä¸ç”¨é‡Œç¨‹ç¢‘å‘¢ï¼Œå½“ç„¶æ˜¯å› ä¸ºå ç©ºé—´å°å•Š<br>"},
            cost: new Decimal("(e^114514) 1"),
            unlocked(){
                if(player.u.points > 0) return true
                else return false
            }
        },
        92: {
            title:"åªæ˜¯ä¸€ä¸ªä¸ºäº†åº†ç¥çš„å‡çº§",
            description(){return "layer.jsçªç ´1000è¡Œ<br>ç‰ˆæœ¬v0.3.2"},
            cost: new Decimal("(e^69420) 1"),
            unlocked(){
                if(player.u.points > 0) return true
                else return false
            }
        },
        201: {
            title:"åªæœ‰æŒ‚å£æ‰èƒ½ä¹°åˆ°è¿™ä¸ªå‡çº§",
            description(){return "æˆ‘æ˜¯æœ€å¼ºé»‘å®¢ï¼Œæˆ‘æ˜¯æœ€å¼ºé»‘å®¢ï¼"},
            cost: new Decimal("(e^1.79e308) 1"),
            unlocked(){
                if(player.u.points > 0) return true
                else return false
            }
        },
    },
    buyables: {
        11: {
            title: "å®‡å®™IQå€å‡",
            cost(x) { 
                let bas = new Decimal(10)
                let scal1 = new Decimal(2)
                if(hasUpgrade("u",23)) bas = bas.sub(1)
                if(getBuyableAmount("u",11).sub(300) > 0) x = x.sub(300).pow(scal1).add(300)
                return new Decimal(10).mul(bas.pow(x.pow(1.1)))
            },
            display() { 
                let disp = "å¢åŠ å‚»é€¼å®‡å®™åŠ›é‡è·å¾—<br>å½“å‰ï¼šx" + format(buyableEffect("u",11))
                //if(buyableEffect("c",11) > 1e30) disp = disp + "ï¼ˆå—nbçš„è½¯ä¸Šé™é™åˆ¶ï¼‰"
                disp = disp + "<br>ä»·æ ¼ï¼š" + format(this.cost())
                if(getBuyableAmount("u",11).sub(300) > 0) disp = disp + "ï¼ˆæŠ˜ç®—ï¼‰"
                disp = disp + "<br>æ•°é‡ï¼š" + format(getBuyableAmount("u",11))
                //if(hasUpgrade("u",14)) disp = disp + "x" + format(getBuyableAmount("c",12))
                return disp
            },
            canAfford() { return player[this.layer].uni.gte(this.cost()) },
            buy() {
                player[this.layer].uni = player[this.layer].uni.sub(this.cost())
                setBuyableAmount(this.layer, this.id, getBuyableAmount(this.layer, this.id).add(1))
            },
            /*buyMax() {
                if (!this.canAfford()) return;
                let tempBuy = player.u.uni.max(1).div(10).log(10).root(1.1)
                let target = tempBuy.plus(1).floor();
                player[this.layer].buyables[this.id] = player[this.layer].buyables[this.id].max(target);
            },*/
            effect(){
                let baseeff = new Decimal(15)
                let effe = baseeff.pow(getBuyableAmount("u",11))
                return effe
            },
        },
        12: {
            title: "å®‡å®™IQè‡ªæˆ‘å€å‡",
            cost(x) { 
                let bas = new Decimal(10)
                let scal1 = new Decimal(2)
                if(getBuyableAmount("u",12).sub(300) > 0) x = x.sub(300).pow(scal1).add(300)
                return new Decimal(1e33).mul(bas.pow(x.pow(1.05)))
            },
            display() { 
                let disp = "åŸºäºå‚»é€¼å®‡å®™åŠ›é‡å¢åŠ å‚»é€¼å®‡å®™åŠ›é‡è·å¾—<br>å½“å‰ï¼šx" + format(buyableEffect("u",12))
                //if(buyableEffect("c",11) > 1e30) disp = disp + "ï¼ˆå—nbçš„è½¯ä¸Šé™é™åˆ¶ï¼‰"
                disp = disp + "<br>ä»·æ ¼ï¼š" + format(this.cost())
                if(getBuyableAmount("u",12).sub(300) > 0) disp = disp + "ï¼ˆæŠ˜ç®—ï¼‰"
                disp = disp + "<br>æ•°é‡ï¼š" + format(getBuyableAmount("u",12))
                //if(hasUpgrade("u",14)) disp = disp + "x" + format(getBuyableAmount("c",12))
                return disp
            },
            canAfford() { return player[this.layer].uni.gte(this.cost()) },
            buy() {
                player[this.layer].uni = player[this.layer].uni.sub(this.cost())
                setBuyableAmount(this.layer, this.id, getBuyableAmount(this.layer, this.id).add(1))
            },
            /*buyMax() {
                if (!this.canAfford()) return;
                let tempBuy = player.u.uni.max(1).div(10).log(10).root(1.05)
                let target = tempBuy.plus(1).floor();
                player[this.layer].buyables[this.id] = player[this.layer].buyables[this.id].max(target);
            },*/
            effect(){
                let baseeff = new Decimal(player.u.uni.log(10).root(3))
                let effe = baseeff.pow(getBuyableAmount("u",12))
                return effe
            },
        },
        13: {
            title: "å®‡å®™IQç‚¸æ­»å€å‡",
            cost(x) { 
                let bas = new Decimal(100)
                let scal1 = new Decimal(2)
                if(getBuyableAmount("u",13).sub(300) > 0) x = x.sub(300).pow(scal1).add(300)
                return new Decimal("1e600").mul(bas.pow(x.pow(1.1)))
            },
            display() { 
                let disp = "åŸºäºè¢«æ ¸å¼¹ç‚¸æ­»çš„å®‡å®™å¢åŠ å‚»é€¼å®‡å®™åŠ›é‡è·å¾—<br>å½“å‰ï¼šx" + format(buyableEffect("u",13))
                //if(buyableEffect("c",11) > 1e30) disp = disp + "ï¼ˆå—nbçš„è½¯ä¸Šé™é™åˆ¶ï¼‰"
                disp = disp + "<br>ä»·æ ¼ï¼š" + format(this.cost())
                if(getBuyableAmount("u",13).sub(300) > 0) disp = disp + "ï¼ˆæŠ˜ç®—ï¼‰"
                disp = disp + "<br>æ•°é‡ï¼š" + format(getBuyableAmount("u",13))
                //if(hasUpgrade("u",14)) disp = disp + "x" + format(getBuyableAmount("c",12))
                return disp
            },
            canAfford() { return player[this.layer].uni.gte(this.cost()) },
            buy() {
                player[this.layer].uni = player[this.layer].uni.sub(this.cost())
                setBuyableAmount(this.layer, this.id, getBuyableAmount(this.layer, this.id).add(1))
            },
            /*buyMax() {
                if (!this.canAfford()) return;
                let tempBuy = player.u.uni.max(1).div(10).log(10).root(1.05)
                let target = tempBuy.plus(1).floor();
                player[this.layer].buyables[this.id] = player[this.layer].buyables[this.id].max(target);
            },*/
            effect(){
                let baseeff = new Decimal(player.u.points.log(10))
                let effe = baseeff.pow(getBuyableAmount("u",13))
                return effe
            },
            unlocked(){
                if(hasUpgrade("u",35)) return true
                else return false
            }
        },
    },
    clickables:{
        11:{
            title: "å¤©ä½“åŠ çƒ­",
            display(){return "ä½¿ä½ çš„å¤©ä½“ç”¨æ¥æå‡å®‡å®™æ¸©åº¦"},
            onClick(){
                player.u.temperature = player.u.layerceff.max(player.u.temperature)
            },
            canClick(){
                return player.c.points > 0
            },
        },
    },
    challenges: {
        11: {
            name: "å®‡å®™å¤ªè†¨èƒ€äº†ï¼Œä½œè€…å‹åˆ¶ä¸€ä¸‹",
            challengeDescription: "å®‡å®™ï¼šä»€ä¹ˆæ™ºéšœç©æ„ï¼Œç»™ä½ ä¸€ä¸ª^0.5",
            goalDescription: "ç›®æ ‡ï¼še1145141919810/e1145141919794ç†µ",
            canComplete: function() {return player.points.gte(1e16)},
            rewardDescription: "ä½œè€…ç‚¸äº†ï¼Œä½¿ä½ çš„ç†µè·å–^1.4514"
        },
        12: {
            name: "ä½œè€…ä½¿ç”¨äº†æ›´nbçš„åŠ›é‡å‹åˆ¶å®‡å®™",
            challengeDescription: "å¤©ä½“æŒ‡æ•°/5",
            goalDescription: "ç›®æ ‡ï¼š1e48ç†µ",
            canComplete: function() {return player.points.gte(1e48)},
            rewardDescription: "å®‡å®™è¡¨ç¤ºå·²è€å®æ±‚æ”¾è¿‡ï¼Œè§£é”å‚»é€¼å®‡å®™åŠ›é‡",
            unlocked(){
                if(hasUpgrade("u",22)) return true
                else return false
            },
        },
        21: {
            name: "åªæ˜¯ä¸€ä¸ªæŒ‘æˆ˜",
            challengeDescription: "ç†µ^0.25,ç²’å­æŒ‡æ•°/10",
            goalDescription: "ç›®æ ‡ï¼š9999999999999999999999999999999999ç†µï¼ˆä¸ä¿¡å¯ä»¥è‡ªå·±æ•°ï¼‰",
            canComplete: function() {return player.points.gte(1e35)},
            rewardDescription() {
                return "å‚»é€¼å®‡å®™åŠ›é‡å¥½åƒæ²¡ç”¨ï¼Œè®©å®ƒåŠ æˆä¸€ä¸‹è¢«æ ¸å¼¹ç‚¸æ­»çš„å®‡å®™çš„æŒ‡æ•°<br>å½“å‰ï¼š+" + format(challengeEffect("u",21))
            },
            rewardEffect(){
                return player.u.uni.log(10).root(2).div(10)
            },
            unlocked(){
                if(hasUpgrade("u",26)) return true
                else return false
            },
        },
        22: {
            name: "å¼ºåˆ¶è£‚å˜",
            challengeDescription: "ä½¿ä½ çš„æ‰€æœ‰å…ƒç´ å¼ºåˆ¶è£‚å˜ä¸ºè´¨å­ï¼Œä¸­å­å’Œç”µå­ã€‚ä¸”ä½ çš„ç²’å­å¤©ä½“è·å¾—/1e500",
            goalDescription: "ç›®æ ‡ï¼šK9e15æ”»å‡»åŠ›",
            canComplete: function() {return player.points.gte("(e^1.79e308) 1")},
            rewardDescription: "æˆ‘é—²çš„è›‹ç–¼åšè¿™ä¸ªç©æ„",
            unlocked(){
                if(hasUpgrade("u",42)) return true
                else return false
            },
        },
    },
    passiveGeneration(){
        if(hasUpgrade("u",25)) return 100
        else return 0
    },
    row: 1,
    hotkeys: [
        {key: "u", description: "U: è¿›è¡Œå®‡å®™è¢«æ ¸å¼¹ç‚¸æ­»é‡ç½®", onPress(){if (canReset(this.layer)) doReset(this.layer)}},
    ],
    layerShown(){
        if(player.u.points > 0) return true
        if(hasUpgrade("c",14)) return true
        else return false
    }
})
addLayer("e", {
    name: "å…ƒç´ åˆæˆå™¨",
    symbol: "e",
    position: 1,
    startData() { return {
        unlocked: false,
		points: new Decimal(0),
        ele: new Decimal(0),
        lele: new Decimal(0),
        llele: new Decimal(0),
        lllele: new Decimal(0),
        proton: new Decimal(0),
        neutron: new Decimal(0),
        electron: new Decimal(0),
        protoneff: new Decimal(0),
        neutroneff: new Decimal(0),
        electroneff: new Decimal(0),
    }},
    color: "#DD55DD",
    requires: new Decimal("1e525"),
    resource: "å…ƒç´ åˆæˆå™¨",
    baseResource: "å¤©ä½“",
    baseAmount() {return player.c.points},
    type: "static",
    exponent: 1,
    branches(){return ["u","c"]},
    autoPrestige(){
        if(hasMilestone("e",1)) return true
        else return false
    },
    resetsNothing(){
        if(hasMilestone("e",1)) return true
        else return false
    },
    gainMult() {
        mult = new Decimal(1)
        return mult
    },
    gainExp() {
        exp = new Decimal(0.02)
        if(player.e.points.sub(5) > 0) exp = exp.sub(0.005)
        if(player.e.points.sub(32) > 0) exp = exp.sub(0.003)
        if(player.e.points.sub(60) > 0) exp = exp.sub(0.002)
        if(player.e.points.sub(109) > 0) exp = exp.sub(0.005)
        return exp
    },
    elegain(){
        let gain = player.e.points.pow(3).div(100)
        let bas = new Decimal(2)
        if(hasUpgrade("uc",13)) bas = bas.add(1)
        if(hasUpgrade("e",15)) gain = bas.pow(player.e.points.div(2))
        if(hasUpgrade("e",11)) gain = gain.mul(upgradeEffect("e",11))
        if(hasUpgrade("e",12)) gain = gain.mul(upgradeEffect("e",12))
        if(hasUpgrade("u",21) && hasUpgrade("e",22)) gain = gain.mul(upgradeEffect("u",21))
        if(hasUpgrade("e",25)) gain = gain.mul(upgradeEffect("e",25))
        if(hasUpgrade("u",41)) gain = gain.mul(upgradeEffect("u",41))
        if(hasUpgrade("uc",11)) gain = gain.mul(upgradeEffect("uc",11))
        return gain
    },
    update(diff){
        player.e.ele=player.e.ele.add(tmp.e.elegain.mul(diff))
        if(hasUpgrade("e",32)) layers.e.clickables[21].onHold()
        if(inChallenge("u",22)){
            player.e.proton = player.e.proton.add(player.e.ele.mul(118))
            player.e.neutron = player.e.neutron.add(player.e.ele.mul(179))
            player.e.electron = player.e.electron.add(player.e.ele.mul(118))
            //ä½ ä¸è¦ç®¡ä¸ºä»€ä¹ˆè¿™ä¸ªä¹˜æ•°è¿™ä¹ˆè¯¡å¼‚ï¼ŒæŒ‰118å·å…ƒç´ ç®—çš„
            player.e.ele = player.e.ele.sub(player.e.ele)
            player.e.lele = player.e.lele.sub(player.e.lele)
            player.e.llele = player.e.llele.sub(player.e.llele)
            player.e.lllele = player.e.lllele.sub(player.e.lllele)
        }
        if(!inChallenge("u",22)){
            player.e.proton = player.e.proton.sub(player.e.proton)
            player.e.neutron = player.e.neutron.sub(player.e.neutron)
            player.e.electron = player.e.electron.sub(player.e.electron)
        }
        player.e.protoneff = player.e.proton.div(1e50).add(1).pow(2)
        if(player.e.protoneff.sub(1e10) > 0 && !hasUpgrade("uc",13)) player.e.protoneff = player.e.protoneff.div(1e10).log(1.1).mul(1e10)
    },
    tabFormat: {
        "ä¸»ç•Œé¢": {
            content: [ ["infobox","introBox"],"main-display","prestige-button",
            ["display-text",function() {return 'ä½ æœ‰' + format(player.e.ele) + 'è¶…é‡å…ƒç´ ,å¢ç›Šç†µè·å–Ã—' + format(player.e.ele.add(1).pow(50)) + 'ï¼ˆåœ¨æŒ‡æ•°ä¹‹åï¼‰'},
               {"color": "#FFFFFF", "font-size": "20px" }],
            ["display-text",function() {return 'ä½ çš„å…ƒç´ åˆæˆå™¨åœ¨5ï¼Œ32ï¼Œ60å°†å—åˆ°è½¯ä¸Šé™'},
                {"color": "#FFFFFF", "font-size": "50px" }],
            ["display-text",function() {
                if(player.e.points.sub(109) > 0)
                    return 'ä½ çš„å…ƒç´ åˆæˆå™¨è¢«è­¦å¯Ÿé€®æ•äº†ï¼Œå—åˆ°è¶…çº§ä¸¥é‡çš„è½¯ä¸Šé™'
            },
                {"color": "#FFFFFF", "font-size": "110px" }],
            ["display-text",function() {
                if(player.e.points.sub(119) > 0)
                    return 'ä½ çš„å…ƒç´ åˆæˆå™¨è¢«é€è¿›ç²¾ç¥ç—…é™¢ï¼Œå—åˆ°è¶…çº§ä¸¥é‡çš„è½¯ä¸Šé™'
            },
                {"color": "#FFFFFF", "font-size": "120px" }],
               "upgrades","milestones"],
        },
        "å…ƒç´ ": {
            content: [["infobox","introBox"],"main-display",
            ["display-text",function() {return 'ä½ æœ‰' + format(player.e.ele) + 'è¶…é‡å…ƒç´ ,å¢ç›Šç†µè·å–Ã—' + format(player.e.ele.add(1).pow(50)) + 'ï¼ˆåœ¨æŒ‡æ•°ä¹‹åï¼‰'},
                {"color": "#FFFFFF", "font-size": "20px" }],
            ["display-text",function() {return 'ä½ æœ‰' + format(player.e.lele) + 'é‡å…ƒç´ ,å¢ç›Šç†µè·å–Ã—' + format(player.e.lele.add(1).pow(25)) + 'ï¼ˆåœ¨æŒ‡æ•°ä¹‹åï¼‰'},
                {"color": "#FFFFFF", "font-size": "20px" }],
            ["display-text",function() {return 'ä½ æœ‰' + format(player.e.llele) + 'å…ƒç´ ,å¢ç›Šç†µè·å–Ã—' + format(player.e.llele.add(1).pow(17)) + 'ï¼ˆåœ¨æŒ‡æ•°ä¹‹åï¼‰'},
                {"color": "#FFFFFF", "font-size": "20px" }],
            ["display-text",function() {return 'ä½ æœ‰' + format(player.e.lllele) + 'è½»å…ƒç´ ,å¢ç›Šç†µè·å–Ã—' + format(player.e.lllele.add(1).pow(10)) + 'ï¼ˆåœ¨æŒ‡æ•°ä¹‹åï¼‰'},
                {"color": "#FFFFFF", "font-size": "20px" }],
            "clickables"
               ],
            unlocked(){
                return hasUpgrade("e",24)
            }
        },
        "åŸå­æ‹†åˆ†": {
            content: [["infobox","introBox"],"main-display",
            ["display-text",function() {
                let disp = 'ä½ æœ‰' + format(player.e.proton) + 'è´¨å­'
                if(hasUpgrade("p",31)) disp = disp + ",å¢ç›Šç†µè·å–x" + format(player.e.protoneff)
                if(player.e.protoneff.sub(1e10) > 0 && !hasUpgrade("uc",13)) disp = disp + "(é˜²æ­¢æŒ‚æœºçš„è½¯ä¸Šé™)"
                return disp
            },
                {"color": "#FFFFFF", "font-size": "20px" }],
            ["display-text",function() {
                return 'ä½ æœ‰' + format(player.e.neutron) + 'ä¸­å­'
            },
                {"color": "#FFFFFF", "font-size": "20px" }],
            ["display-text",function() {
                return 'ä½ æœ‰' + format(player.e.electron) + 'ç”µå­'
            },
                {"color": "#FFFFFF", "font-size": "20px" }],
            ],
            unlocked(){
                return inChallenge("u",22)
            }
        }
    },
    upgrades: {
        11: {
            title:"æ•ˆç‡",
            description(){return "åŸºäºä½ çš„è¢«æ ¸å¼¹ç‚¸æ­»çš„å®‡å®™å€å¢è¶…é‡å…ƒç´ è·å–<br>å½“å‰:x" + format(upgradeEffect("e",11))},
            cost: new Decimal(30),currencyDisplayName:"è¶…é‡å…ƒç´ ",currencyInternalName:"ele",currencyLayer:"e",
            effect(){
                return player.u.points.add(1).log(10).div(10)
            },
            unlocked(){
                if(player.e.points.sub(1) >= 0) return true
                else return false
            },
        },
        12: {
            title:"ç»§ç»­åŠ é€Ÿ",
            description(){return "åŸºäºå‚»é€¼å®‡å®™åŠ›é‡å€å¢è¶…é‡å…ƒç´ è·å¾—<br>å½“å‰ï¼šx" + format(upgradeEffect("e",12))},
            cost: new Decimal(1000),currencyDisplayName:"è¶…é‡å…ƒç´ ",currencyInternalName:"ele",currencyLayer:"e",
            effect(){
                return player.u.uni.add(1).log(10).div(100)
            },
            unlocked(){
                if(hasUpgrade("e",11)) return true
                else return false
            },
        },
        13: {
            title:"åå¢ç›Š",
            description(){return "åŸºäºè¶…é‡å…ƒç´ å€å¢è¢«æ ¸å¼¹ç‚¸æ­»çš„å®‡å®™å’Œå‚»é€¼å®‡å®™åŠ›é‡è·å¾—<br>å½“å‰ï¼šx" + format(upgradeEffect("e",13))},
            cost: new Decimal(15000),currencyDisplayName:"è¶…é‡å…ƒç´ ",currencyInternalName:"ele",currencyLayer:"e",
            effect(){
                return player.e.ele.add(1)
            },
            unlocked(){
                if(hasUpgrade("e",12)) return true
                else return false
            },
        },
        14: {
            title:"è´¨é‡",
            description(){return "åœ¨å¤©ä½“å±‚çº§è§£é”æ’æ˜Ÿè´¨é‡"},
            cost: new Decimal(100000),currencyDisplayName:"è¶…é‡å…ƒç´ ",currencyInternalName:"ele",currencyLayer:"e",
            unlocked(){
                if(hasUpgrade("e",13)) return true
                else return false
            },
        },
        15: {
            title:"å…¬å¼åŠ å¼º",
            description(){return "æ”¹å˜è¶…é‡å…ƒç´ çš„è·å¾—å…¬å¼"},
            cost: new Decimal(3000000),currencyDisplayName:"è¶…é‡å…ƒç´ ",currencyInternalName:"ele",currencyLayer:"e",
            unlocked(){
                if(hasUpgrade("e",14)) return true
                else return false
            },
        },
        21: {
            title:"æ’æ˜Ÿè´¨é‡å¾ˆå¼ºï¼Œè®©æˆ‘ä»¬ä¿ç•™å®ƒ",
            description(){return "åœ¨ç¬¬äºŒè¡Œé‡ç½®æ—¶ä¿ç•™æ’æ˜Ÿè´¨é‡"},
            cost: new Decimal(150000000),currencyDisplayName:"è¶…é‡å…ƒç´ ",currencyInternalName:"ele",currencyLayer:"e",
            unlocked(){
                if(hasUpgrade("e",15)) return true
                else return false
            },
        },
        22: {
            title:"ã€Šboost or nerfã€‹",
            description(){return "è®©uå±‚å‡çº§21ä»åŠ æˆç†µå˜ä¸ºåŠ æˆæ’æ˜Ÿè´¨é‡è·å–"},
            cost: new Decimal(1e10),currencyDisplayName:"è¶…é‡å…ƒç´ ",currencyInternalName:"ele",currencyLayer:"e",
            unlocked(){
                if(hasUpgrade("e",21)) return true
                else return false
            },
        },
        23: {
            title:"é¢ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆè¿™ä¹ˆå†™",
            description(){return "è®©è¶…é‡å…ƒç´ å€å¢æ’æ˜Ÿè´¨é‡è·å–<br>å½“å‰: x" + format(upgradeEffect("e",23))},
            cost: new Decimal(1e24),currencyDisplayName:"è¶…é‡å…ƒç´ ",currencyInternalName:"ele",currencyLayer:"e",
            effect(){
                return player.e.ele.add(1).log(10).add(1).pow(2)
            },
            unlocked(){
                if(hasUpgrade("e",22)) return true
                else return false
            },
        },
        24: {
            title:"è£‚å˜å¼€å§‹",
            description(){return "è§£é”å…ƒç´ è£‚å˜"},
            cost: new Decimal(3e26),currencyDisplayName:"è¶…é‡å…ƒç´ ",currencyInternalName:"ele",currencyLayer:"e",
            unlocked(){
                if(hasUpgrade("e",23)) return true
                else return false
            },
        },
        25: {
            title:"åŠ é€Ÿåˆæˆ",
            description(){return "è®©é‡å…ƒç´ *å…ƒç´ *è½»å…ƒç´ å€å¢è¶…é‡å…ƒç´ è·å–<br>å½“å‰ï¼šx" + format(upgradeEffect("e",25))},
            cost: new Decimal(5e28),currencyDisplayName:"è¶…é‡å…ƒç´ ",currencyInternalName:"ele",currencyLayer:"e",
            effect(){
                return player.e.lele.mul(player.e.llele.mul(player.e.lllele)).add(1).root(8)
            },
            unlocked(){
                if(hasUpgrade("e",24)) return true
                else return false
            },
        },
        31: {
            title:"è´¨é‡",
            description(){return "è®©ç²’å­å€å¢æ’æ˜Ÿè´¨é‡è·å–<br>å½“å‰ï¼šx" + format(upgradeEffect("e",31))},
            cost: new Decimal(1e40),currencyDisplayName:"è¶…é‡å…ƒç´ ",currencyInternalName:"ele",currencyLayer:"e",
            effect(){
                return player.p.points.add(1).log(1.01).add(1)
            },
            unlocked(){
                if(hasUpgrade("e",25)) return true
                else return false
            },
        },
        32: {
            title:"æ‹‰å±",
            description(){return "è‡ªåŠ¨ç‚¹å‡»æœ€åä¸€ä¸ªå¯ç‚¹å‡»ï¼Œä¸”ä¸æ¶ˆè€—ä»»ä½•ä¸œè¥¿"},
            cost: new Decimal(1e45),currencyDisplayName:"è¶…é‡å…ƒç´ ",currencyInternalName:"ele",currencyLayer:"e",
            unlocked(){
                if(hasUpgrade("e",31)) return true
                else return false
            },
        },
        33: {
            title:"å…¶å®æˆ‘åœ¨å¾ˆæ—©å°±æœ‰è¿™ä¸ªæƒ³æ³•äº†",
            description(){return "è§£é”å®‡å®™å¾®æ³¢è¾å°„æ¸©åº¦"},
            cost: new Decimal(110),
            unlocked(){
                if(hasUpgrade("e",32)) return true
                else return false
            },
        },
    },
    milestones: {
        0: {
            requirementDescription: "10å…ƒç´ åˆæˆå™¨",
            effectDescription: "åœ¨ç¬¬äºŒè¡Œé‡ç½®æ—¶ä¿ç•™ç¬¬ä¸€è¡Œçš„å‡çº§å’Œé‡Œç¨‹ç¢‘",
            done() { return player.e.points.gte(10) }
        },
        1: {
            requirementDescription: "100å…ƒç´ åˆæˆå™¨",
            effectDescription: "ä½ å¯ä»¥è‡ªåŠ¨è´­ä¹°å…ƒç´ åˆæˆå™¨ä¸”å…ƒç´ åˆæˆä¸é‡ç½®ä»»ä½•ä¸œè¥¿",
            done() { return player.e.points.gte(100) }
        },
    },
    clickables: {
        11: {
            title: "æ ¸è£‚å˜1",
            display(){return "å°†ä½ 10%è¶…é‡å…ƒç´ è½¬åŒ–ä¸ºé‡å…ƒç´ "},
            onClick(){
                player.e.lele = player.e.lele.add(player.e.ele.root(1.5))
                if(!hasUpgrade("e",32)) player.e.ele = player.e.ele.sub(player.e.ele.mul(0.1))
            },
            canClick(){
                return player.e.ele > 0
            },
        },
        12: {
            title: "æ ¸è£‚å˜2",
            display(){return "å°†ä½ 10%é‡å…ƒç´ è½¬åŒ–ä¸ºå…ƒç´ "},
            onClick(){
                player.e.llele = player.e.llele.add(player.e.lele.root(1.3))
                if(!hasUpgrade("e",32)) player.e.lele = player.e.lele.sub(player.e.lele.mul(0.1))
            },
            canClick(){
                return player.e.lele > 0
            },
        },
        13: {
            title: "æ ¸è£‚å˜3",
            display(){return "å°†ä½ 10%å…ƒç´ è½¬åŒ–ä¸ºè½»å…ƒç´ "},
            onClick(){
                player.e.lllele = player.e.lllele.add(player.e.llele.root(1.2))
                if(!hasUpgrade("e",32)) player.e.llele = player.e.llele.sub(player.e.llele.mul(0.1))
            },
            canClick(){
                return player.e.llele > 0
            },
        },
        21: {
            title: "æ€»è£‚å˜",
            display(){return "åŒæ—¶è¿›è¡Œä¸Šé¢çš„3ä¸ªè£‚å˜"},
            onClick(){
                player.e.lele = player.e.lele.add(player.e.ele.root(1.5))
                if(!hasUpgrade("e",32)) player.e.ele = player.e.ele.sub(player.e.ele.mul(0.1))
                player.e.llele = player.e.llele.add(player.e.lele.root(1.3))
                if(!hasUpgrade("e",32)) player.e.lele = player.e.lele.sub(player.e.lele.mul(0.1))
                player.e.lllele = player.e.lllele.add(player.e.llele.root(1.2))
                if(!hasUpgrade("e",32)) player.e.llele = player.e.llele.sub(player.e.llele.mul(0.1))
            },
            onHold(){
                player.e.lele = player.e.lele.add(player.e.ele.root(1.5))
                if(!hasUpgrade("e",32)) player.e.ele = player.e.ele.sub(player.e.ele.mul(0.1))
                player.e.llele = player.e.llele.add(player.e.lele.root(1.3))
                if(!hasUpgrade("e",32)) player.e.lele = player.e.lele.sub(player.e.lele.mul(0.1))
                player.e.lllele = player.e.lllele.add(player.e.llele.root(1.2))
                if(!hasUpgrade("e",32)) player.e.llele = player.e.llele.sub(player.e.llele.mul(0.1))
            },
            canClick(){
                return player.e.llele > 0
            },
        },
    },
    
    /*passiveGeneration(){
        if(hasMilestone("c",0)) return 1
        else return 0
    },*/
    row: 1,
    
    hotkeys: [
        {key: "e", description: "E: è¿›è¡Œå¤©ä½“åˆæˆé‡ç½®", onPress(){if (canReset(this.layer)) doReset(this.layer)}},
    ],
    layerShown(){return hasUpgrade("u",35)}
})
addLayer("uc", {
    infoboxes:{
        introBox:{
            title:"ä¸€ä¸ªä»‹ç»",
            body(){
                return "è¿™æ˜¯ä¸ºäº†uå±‚æŒ‘æˆ˜4ä¸“é—¨å‡†å¤‡çš„å‡çº§å±‚ï¼Œæœ¬å±‚çº§çš„å‡çº§å¿…é¡»åœ¨uc4é‡Œè´­ä¹°<br>è¿˜æœ‰ï¼Œåƒä¸‡åƒä¸‡ä¸è¦æ‰‹æ¬ ç”¨æ§åˆ¶å°é‡ç½®ï¼Œå¦åˆ™ç›¸å½“äºç¡¬é‡ç½®<br>(tips:æœ¬å±‚çº§çš„æ¯ä¸€ä¸ªå‡çº§éƒ½ä¼šè§£é”ä¸€äº›å‡çº§)"
            }
        },
    },
    name: "walalalalala",
    symbol: "uc",
    position: 0,
    startData() { return {
        unlocked: true,
		points: new Decimal(0),
    }},
    color: "#FFFFFF",
    requires: new Decimal("1"),
    resource: "walalalalala",
    baseResource: "ç†µ",
    baseAmount() {return player.points},
    type: "normal",
    exponent: 0,
    branches(){return ["u"]},
    gainMult() {
        mult = new Decimal(1)
        return mult
    },
    gainExp() {
        exp = new Decimal(1)
        return exp
    },
    tabFormat: {
        "é¢": {
            content: [ ["infobox","introBox"],"main-display","upgrades"]},
    },
    upgrades: {
        11: {
            title:"å‡çº§1",
            description(){return "ä½¿ç†µå€å¢è¶…é‡å…ƒç´ è·å¾—<br>å½“å‰ï¼šx" + format(upgradeEffect("uc",11))},
            cost: new Decimal(1e28),currencyDisplayName:"ç†µ",currencyInternalName:"pts",currencyLayer:"p",
            effect(){
                return player.points.add(1).log(10).add(1).pow(3)
            },
        },
        12: {
            title:"å‡çº§2",
            description(){return "åŸºäºå‚»é€¼å®‡å®™åŠ›é‡å€å¢ç†µè·å–(åœ¨uc4ä¸­è¢«å‰Šå¼±)<br>å½“å‰ï¼šx" + format(upgradeEffect("uc",12))},
            cost: new Decimal(1e60),currencyDisplayName:"ç†µ",currencyInternalName:"pts",currencyLayer:"p",
            effect(){
                if(inChallenge("u",22)) return player.u.uni.add(1).log(10).add(1).root(2)
                else return player.u.uni.add(1).log(10).add(1).pow(200)
            },
        },
        13: {
            title:"å‡çº§3",
            description(){return "å…ƒç´ åˆæˆå™¨æ•ˆæœåº•æ•°+1,å¹¶ä¸”å¹²æ‰è´¨å­æ•ˆæœçš„è½¯ä¸Šé™"},
            cost: new Decimal(1e200),currencyDisplayName:"ç†µ",currencyInternalName:"pts",currencyLayer:"p",
        },
    },
    row: 999,
    
    hotkeys: [
        {key: "", description: "", onPress(){if (canReset(this.layer)) doReset(this.layer)}},
    ],
    layerShown(){return hasUpgrade("u",42)}
})